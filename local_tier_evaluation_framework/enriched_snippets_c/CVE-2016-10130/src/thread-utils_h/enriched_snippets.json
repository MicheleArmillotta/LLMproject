[
  {
    "function_name": "git_atomic_get",
    "container": null,
    "file": "/home/michele/Desktop/ricerca/output_repos_c/CVE-2016-10130/repo/src/thread-utils.h",
    "lines": "217-220",
    "snippet": "GIT_INLINE(int) git_atomic_get(git_atomic *a)\n{\n\treturn (int)a->val;\n}",
    "includes": [
      "#   include \"unix/pthread.h\"",
      "#   include \"win32/thread.h\""
    ],
    "macros_used": [],
    "globals_used": [],
    "called_functions": [],
    "contextual_snippet": "#   include \"unix/pthread.h\"\n#   include \"win32/thread.h\"\n\nGIT_INLINE(int) git_atomic_get(git_atomic *a)\n{\n\treturn (int)a->val;\n}"
  },
  {
    "function_name": "git_atomic64_add",
    "container": null,
    "file": "/home/michele/Desktop/ricerca/output_repos_c/CVE-2016-10130/repo/src/thread-utils.h",
    "lines": "207-211",
    "snippet": "GIT_INLINE(int64_t) git_atomic64_add(git_atomic64 *a, int64_t addend)\n{\n\ta->val += addend;\n\treturn a->val;\n}",
    "includes": [
      "#   include \"unix/pthread.h\"",
      "#   include \"win32/thread.h\""
    ],
    "macros_used": [],
    "globals_used": [],
    "called_functions": [],
    "contextual_snippet": "#   include \"unix/pthread.h\"\n#   include \"win32/thread.h\"\n\nGIT_INLINE(int64_t) git_atomic64_add(git_atomic64 *a, int64_t addend)\n{\n\ta->val += addend;\n\treturn a->val;\n}"
  },
  {
    "function_name": "git___swap",
    "container": null,
    "file": "/home/michele/Desktop/ricerca/output_repos_c/CVE-2016-10130/repo/src/thread-utils.h",
    "lines": "197-203",
    "snippet": "GIT_INLINE(volatile void *) git___swap(\n\tvoid * volatile *ptr, void *newval)\n{\n\tvolatile void *old = *ptr;\n\t*ptr = newval;\n\treturn old;\n}",
    "includes": [
      "#   include \"unix/pthread.h\"",
      "#   include \"win32/thread.h\""
    ],
    "macros_used": [],
    "globals_used": [],
    "called_functions": [],
    "contextual_snippet": "#   include \"unix/pthread.h\"\n#   include \"win32/thread.h\"\n\nGIT_INLINE(volatile void *) git___swap(\n\tvoid * volatile *ptr, void *newval)\n{\n\tvolatile void *old = *ptr;\n\t*ptr = newval;\n\treturn old;\n}"
  },
  {
    "function_name": "git___compare_and_swap",
    "container": null,
    "file": "/home/michele/Desktop/ricerca/output_repos_c/CVE-2016-10130/repo/src/thread-utils.h",
    "lines": "187-195",
    "snippet": "GIT_INLINE(void *) git___compare_and_swap(\n\tvoid * volatile *ptr, void *oldval, void *newval)\n{\n\tif (*ptr == oldval)\n\t\t*ptr = newval;\n\telse\n\t\toldval = newval;\n\treturn oldval;\n}",
    "includes": [
      "#   include \"unix/pthread.h\"",
      "#   include \"win32/thread.h\""
    ],
    "macros_used": [],
    "globals_used": [],
    "called_functions": [],
    "contextual_snippet": "#   include \"unix/pthread.h\"\n#   include \"win32/thread.h\"\n\nGIT_INLINE(void *) git___compare_and_swap(\n\tvoid * volatile *ptr, void *oldval, void *newval)\n{\n\tif (*ptr == oldval)\n\t\t*ptr = newval;\n\telse\n\t\toldval = newval;\n\treturn oldval;\n}"
  },
  {
    "function_name": "git_atomic_dec",
    "container": null,
    "file": "/home/michele/Desktop/ricerca/output_repos_c/CVE-2016-10130/repo/src/thread-utils.h",
    "lines": "182-185",
    "snippet": "GIT_INLINE(int) git_atomic_dec(git_atomic *a)\n{\n\treturn --a->val;\n}",
    "includes": [
      "#   include \"unix/pthread.h\"",
      "#   include \"win32/thread.h\""
    ],
    "macros_used": [],
    "globals_used": [],
    "called_functions": [],
    "contextual_snippet": "#   include \"unix/pthread.h\"\n#   include \"win32/thread.h\"\n\nGIT_INLINE(int) git_atomic_dec(git_atomic *a)\n{\n\treturn --a->val;\n}"
  },
  {
    "function_name": "git_atomic_add",
    "container": null,
    "file": "/home/michele/Desktop/ricerca/output_repos_c/CVE-2016-10130/repo/src/thread-utils.h",
    "lines": "176-180",
    "snippet": "GIT_INLINE(int) git_atomic_add(git_atomic *a, int32_t addend)\n{\n\ta->val += addend;\n\treturn a->val;\n}",
    "includes": [
      "#   include \"unix/pthread.h\"",
      "#   include \"win32/thread.h\""
    ],
    "macros_used": [],
    "globals_used": [],
    "called_functions": [],
    "contextual_snippet": "#   include \"unix/pthread.h\"\n#   include \"win32/thread.h\"\n\nGIT_INLINE(int) git_atomic_add(git_atomic *a, int32_t addend)\n{\n\ta->val += addend;\n\treturn a->val;\n}"
  },
  {
    "function_name": "git_atomic_inc",
    "container": null,
    "file": "/home/michele/Desktop/ricerca/output_repos_c/CVE-2016-10130/repo/src/thread-utils.h",
    "lines": "171-174",
    "snippet": "GIT_INLINE(int) git_atomic_inc(git_atomic *a)\n{\n\treturn ++a->val;\n}",
    "includes": [
      "#   include \"unix/pthread.h\"",
      "#   include \"win32/thread.h\""
    ],
    "macros_used": [],
    "globals_used": [],
    "called_functions": [],
    "contextual_snippet": "#   include \"unix/pthread.h\"\n#   include \"win32/thread.h\"\n\nGIT_INLINE(int) git_atomic_inc(git_atomic *a)\n{\n\treturn ++a->val;\n}"
  },
  {
    "function_name": "git_atomic_set",
    "container": null,
    "file": "/home/michele/Desktop/ricerca/output_repos_c/CVE-2016-10130/repo/src/thread-utils.h",
    "lines": "166-169",
    "snippet": "GIT_INLINE(void) git_atomic_set(git_atomic *a, int val)\n{\n\ta->val = val;\n}",
    "includes": [
      "#   include \"unix/pthread.h\"",
      "#   include \"win32/thread.h\""
    ],
    "macros_used": [],
    "globals_used": [],
    "called_functions": [],
    "contextual_snippet": "#   include \"unix/pthread.h\"\n#   include \"win32/thread.h\"\n\nGIT_INLINE(void) git_atomic_set(git_atomic *a, int val)\n{\n\ta->val = val;\n}"
  },
  {
    "function_name": "git_mutex_lock",
    "container": null,
    "file": "/home/michele/Desktop/ricerca/output_repos_c/CVE-2016-10130/repo/src/thread-utils.h",
    "lines": "142-143",
    "snippet": "GIT_INLINE(int) git_mutex_lock(git_mutex *mutex) \\\n\t{ GIT_UNUSED(mutex); return 0; }",
    "includes": [
      "#   include \"unix/pthread.h\"",
      "#   include \"win32/thread.h\""
    ],
    "macros_used": [
      "#define git_mutex unsigned int"
    ],
    "globals_used": [],
    "called_functions": [
      {
        "call_info": {
          "callee": "GIT_UNUSED",
          "args": [
            "mutex"
          ],
          "line": 143
        },
        "resolved": false,
        "reason": "library_or_external"
      }
    ],
    "contextual_snippet": "#   include \"unix/pthread.h\"\n#   include \"win32/thread.h\"\n\n#define git_mutex unsigned int\n\nGIT_INLINE(int) git_mutex_lock(git_mutex *mutex) \\\n\t{ GIT_UNUSED(mutex); return 0; }"
  },
  {
    "function_name": "git_mutex_init",
    "container": null,
    "file": "/home/michele/Desktop/ricerca/output_repos_c/CVE-2016-10130/repo/src/thread-utils.h",
    "lines": "140-141",
    "snippet": "GIT_INLINE(int) git_mutex_init(git_mutex *mutex) \\\n\t{ GIT_UNUSED(mutex); return 0; }",
    "includes": [
      "#   include \"unix/pthread.h\"",
      "#   include \"win32/thread.h\""
    ],
    "macros_used": [
      "#define git_mutex unsigned int"
    ],
    "globals_used": [],
    "called_functions": [
      {
        "call_info": {
          "callee": "GIT_UNUSED",
          "args": [
            "mutex"
          ],
          "line": 141
        },
        "resolved": false,
        "reason": "library_or_external"
      }
    ],
    "contextual_snippet": "#   include \"unix/pthread.h\"\n#   include \"win32/thread.h\"\n\n#define git_mutex unsigned int\n\nGIT_INLINE(int) git_mutex_init(git_mutex *mutex) \\\n\t{ GIT_UNUSED(mutex); return 0; }"
  },
  {
    "function_name": "git_atomic64_add",
    "container": null,
    "file": "/home/michele/Desktop/ricerca/output_repos_c/CVE-2016-10130/repo/src/thread-utils.h",
    "lines": "119-128",
    "snippet": "GIT_INLINE(int64_t) git_atomic64_add(git_atomic64 *a, int64_t addend)\n{\n#if defined(GIT_WIN32)\n\treturn InterlockedExchangeAdd64(&a->val, addend);\n#elif defined(__GNUC__)\n\treturn __sync_add_and_fetch(&a->val, addend);\n#else\n#\terror \"Unsupported architecture for atomic operations\"\n#endif\n}",
    "includes": [
      "#   include \"unix/pthread.h\"",
      "#   include \"win32/thread.h\""
    ],
    "macros_used": [],
    "globals_used": [],
    "called_functions": [
      {
        "call_info": {
          "callee": "__sync_add_and_fetch",
          "args": [
            "&a->val",
            "addend"
          ],
          "line": 124
        },
        "resolved": false,
        "reason": "library_or_external"
      },
      {
        "call_info": {
          "callee": "InterlockedExchangeAdd64",
          "args": [
            "&a->val",
            "addend"
          ],
          "line": 122
        },
        "resolved": false,
        "reason": "library_or_external"
      }
    ],
    "contextual_snippet": "#   include \"unix/pthread.h\"\n#   include \"win32/thread.h\"\n\nGIT_INLINE(int64_t) git_atomic64_add(git_atomic64 *a, int64_t addend)\n{\n#if defined(GIT_WIN32)\n\treturn InterlockedExchangeAdd64(&a->val, addend);\n#elif defined(__GNUC__)\n\treturn __sync_add_and_fetch(&a->val, addend);\n#else\n#\terror \"Unsupported architecture for atomic operations\"\n#endif\n}"
  },
  {
    "function_name": "git___swap",
    "container": null,
    "file": "/home/michele/Desktop/ricerca/output_repos_c/CVE-2016-10130/repo/src/thread-utils.h",
    "lines": "107-115",
    "snippet": "GIT_INLINE(volatile void *) git___swap(\n\tvoid * volatile *ptr, void *newval)\n{\n#if defined(GIT_WIN32)\n\treturn InterlockedExchangePointer(ptr, newval);\n#else\n\treturn __sync_lock_test_and_set(ptr, newval);\n#endif\n}",
    "includes": [
      "#   include \"unix/pthread.h\"",
      "#   include \"win32/thread.h\""
    ],
    "macros_used": [],
    "globals_used": [],
    "called_functions": [
      {
        "call_info": {
          "callee": "__sync_lock_test_and_set",
          "args": [
            "ptr",
            "newval"
          ],
          "line": 113
        },
        "resolved": false,
        "reason": "library_or_external"
      },
      {
        "call_info": {
          "callee": "InterlockedExchangePointer",
          "args": [
            "ptr",
            "newval"
          ],
          "line": 111
        },
        "resolved": false,
        "reason": "library_or_external"
      }
    ],
    "contextual_snippet": "#   include \"unix/pthread.h\"\n#   include \"win32/thread.h\"\n\nGIT_INLINE(volatile void *) git___swap(\n\tvoid * volatile *ptr, void *newval)\n{\n#if defined(GIT_WIN32)\n\treturn InterlockedExchangePointer(ptr, newval);\n#else\n\treturn __sync_lock_test_and_set(ptr, newval);\n#endif\n}"
  },
  {
    "function_name": "git___compare_and_swap",
    "container": null,
    "file": "/home/michele/Desktop/ricerca/output_repos_c/CVE-2016-10130/repo/src/thread-utils.h",
    "lines": "93-105",
    "snippet": "GIT_INLINE(void *) git___compare_and_swap(\n\tvoid * volatile *ptr, void *oldval, void *newval)\n{\n\tvolatile void *foundval;\n#if defined(GIT_WIN32)\n\tfoundval = InterlockedCompareExchangePointer((volatile PVOID *)ptr, newval, oldval);\n#elif defined(__GNUC__)\n\tfoundval = __sync_val_compare_and_swap(ptr, oldval, newval);\n#else\n#\terror \"Unsupported architecture for atomic operations\"\n#endif\n\treturn (foundval == oldval) ? oldval : newval;\n}",
    "includes": [
      "#   include \"unix/pthread.h\"",
      "#   include \"win32/thread.h\""
    ],
    "macros_used": [],
    "globals_used": [],
    "called_functions": [
      {
        "call_info": {
          "callee": "__sync_val_compare_and_swap",
          "args": [
            "ptr",
            "oldval",
            "newval"
          ],
          "line": 100
        },
        "resolved": false,
        "reason": "library_or_external"
      },
      {
        "call_info": {
          "callee": "InterlockedCompareExchangePointer",
          "args": [
            "(volatile PVOID *)ptr",
            "newval",
            "oldval"
          ],
          "line": 98
        },
        "resolved": false,
        "reason": "library_or_external"
      }
    ],
    "contextual_snippet": "#   include \"unix/pthread.h\"\n#   include \"win32/thread.h\"\n\nGIT_INLINE(void *) git___compare_and_swap(\n\tvoid * volatile *ptr, void *oldval, void *newval)\n{\n\tvolatile void *foundval;\n#if defined(GIT_WIN32)\n\tfoundval = InterlockedCompareExchangePointer((volatile PVOID *)ptr, newval, oldval);\n#elif defined(__GNUC__)\n\tfoundval = __sync_val_compare_and_swap(ptr, oldval, newval);\n#else\n#\terror \"Unsupported architecture for atomic operations\"\n#endif\n\treturn (foundval == oldval) ? oldval : newval;\n}"
  },
  {
    "function_name": "git_atomic_dec",
    "container": null,
    "file": "/home/michele/Desktop/ricerca/output_repos_c/CVE-2016-10130/repo/src/thread-utils.h",
    "lines": "82-91",
    "snippet": "GIT_INLINE(int) git_atomic_dec(git_atomic *a)\n{\n#if defined(GIT_WIN32)\n\treturn InterlockedDecrement(&a->val);\n#elif defined(__GNUC__)\n\treturn __sync_sub_and_fetch(&a->val, 1);\n#else\n#\terror \"Unsupported architecture for atomic operations\"\n#endif\n}",
    "includes": [
      "#   include \"unix/pthread.h\"",
      "#   include \"win32/thread.h\""
    ],
    "macros_used": [],
    "globals_used": [],
    "called_functions": [
      {
        "call_info": {
          "callee": "__sync_sub_and_fetch",
          "args": [
            "&a->val",
            "1"
          ],
          "line": 87
        },
        "resolved": false,
        "reason": "library_or_external"
      },
      {
        "call_info": {
          "callee": "InterlockedDecrement",
          "args": [
            "&a->val"
          ],
          "line": 85
        },
        "resolved": false,
        "reason": "library_or_external"
      }
    ],
    "contextual_snippet": "#   include \"unix/pthread.h\"\n#   include \"win32/thread.h\"\n\nGIT_INLINE(int) git_atomic_dec(git_atomic *a)\n{\n#if defined(GIT_WIN32)\n\treturn InterlockedDecrement(&a->val);\n#elif defined(__GNUC__)\n\treturn __sync_sub_and_fetch(&a->val, 1);\n#else\n#\terror \"Unsupported architecture for atomic operations\"\n#endif\n}"
  },
  {
    "function_name": "git_atomic_add",
    "container": null,
    "file": "/home/michele/Desktop/ricerca/output_repos_c/CVE-2016-10130/repo/src/thread-utils.h",
    "lines": "71-80",
    "snippet": "GIT_INLINE(int) git_atomic_add(git_atomic *a, int32_t addend)\n{\n#if defined(GIT_WIN32)\n\treturn InterlockedExchangeAdd(&a->val, addend);\n#elif defined(__GNUC__)\n\treturn __sync_add_and_fetch(&a->val, addend);\n#else\n#\terror \"Unsupported architecture for atomic operations\"\n#endif\n}",
    "includes": [
      "#   include \"unix/pthread.h\"",
      "#   include \"win32/thread.h\""
    ],
    "macros_used": [],
    "globals_used": [],
    "called_functions": [
      {
        "call_info": {
          "callee": "__sync_add_and_fetch",
          "args": [
            "&a->val",
            "addend"
          ],
          "line": 76
        },
        "resolved": false,
        "reason": "library_or_external"
      },
      {
        "call_info": {
          "callee": "InterlockedExchangeAdd",
          "args": [
            "&a->val",
            "addend"
          ],
          "line": 74
        },
        "resolved": false,
        "reason": "library_or_external"
      }
    ],
    "contextual_snippet": "#   include \"unix/pthread.h\"\n#   include \"win32/thread.h\"\n\nGIT_INLINE(int) git_atomic_add(git_atomic *a, int32_t addend)\n{\n#if defined(GIT_WIN32)\n\treturn InterlockedExchangeAdd(&a->val, addend);\n#elif defined(__GNUC__)\n\treturn __sync_add_and_fetch(&a->val, addend);\n#else\n#\terror \"Unsupported architecture for atomic operations\"\n#endif\n}"
  },
  {
    "function_name": "git_atomic_inc",
    "container": null,
    "file": "/home/michele/Desktop/ricerca/output_repos_c/CVE-2016-10130/repo/src/thread-utils.h",
    "lines": "60-69",
    "snippet": "GIT_INLINE(int) git_atomic_inc(git_atomic *a)\n{\n#if defined(GIT_WIN32)\n\treturn InterlockedIncrement(&a->val);\n#elif defined(__GNUC__)\n\treturn __sync_add_and_fetch(&a->val, 1);\n#else\n#\terror \"Unsupported architecture for atomic operations\"\n#endif\n}",
    "includes": [
      "#   include \"unix/pthread.h\"",
      "#   include \"win32/thread.h\""
    ],
    "macros_used": [],
    "globals_used": [],
    "called_functions": [
      {
        "call_info": {
          "callee": "__sync_add_and_fetch",
          "args": [
            "&a->val",
            "1"
          ],
          "line": 65
        },
        "resolved": false,
        "reason": "library_or_external"
      },
      {
        "call_info": {
          "callee": "InterlockedIncrement",
          "args": [
            "&a->val"
          ],
          "line": 63
        },
        "resolved": false,
        "reason": "library_or_external"
      }
    ],
    "contextual_snippet": "#   include \"unix/pthread.h\"\n#   include \"win32/thread.h\"\n\nGIT_INLINE(int) git_atomic_inc(git_atomic *a)\n{\n#if defined(GIT_WIN32)\n\treturn InterlockedIncrement(&a->val);\n#elif defined(__GNUC__)\n\treturn __sync_add_and_fetch(&a->val, 1);\n#else\n#\terror \"Unsupported architecture for atomic operations\"\n#endif\n}"
  },
  {
    "function_name": "git_atomic_set",
    "container": null,
    "file": "/home/michele/Desktop/ricerca/output_repos_c/CVE-2016-10130/repo/src/thread-utils.h",
    "lines": "49-58",
    "snippet": "GIT_INLINE(void) git_atomic_set(git_atomic *a, int val)\n{\n#if defined(GIT_WIN32)\n\tInterlockedExchange(&a->val, (LONG)val);\n#elif defined(__GNUC__)\n\t__sync_lock_test_and_set(&a->val, val);\n#else\n#\terror \"Unsupported architecture for atomic operations\"\n#endif\n}",
    "includes": [
      "#   include \"unix/pthread.h\"",
      "#   include \"win32/thread.h\""
    ],
    "macros_used": [],
    "globals_used": [],
    "called_functions": [
      {
        "call_info": {
          "callee": "__sync_lock_test_and_set",
          "args": [
            "&a->val",
            "val"
          ],
          "line": 54
        },
        "resolved": false,
        "reason": "library_or_external"
      },
      {
        "call_info": {
          "callee": "InterlockedExchange",
          "args": [
            "&a->val",
            "(LONG)val"
          ],
          "line": 52
        },
        "resolved": false,
        "reason": "library_or_external"
      }
    ],
    "contextual_snippet": "#   include \"unix/pthread.h\"\n#   include \"win32/thread.h\"\n\nGIT_INLINE(void) git_atomic_set(git_atomic *a, int val)\n{\n#if defined(GIT_WIN32)\n\tInterlockedExchange(&a->val, (LONG)val);\n#elif defined(__GNUC__)\n\t__sync_lock_test_and_set(&a->val, val);\n#else\n#\terror \"Unsupported architecture for atomic operations\"\n#endif\n}"
  }
]