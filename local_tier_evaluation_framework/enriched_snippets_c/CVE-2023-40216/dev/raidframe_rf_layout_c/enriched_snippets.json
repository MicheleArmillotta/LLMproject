[
  {
    "function_name": "rf_MapStripeIDToParityStripeID",
    "container": null,
    "file": "/home/michele/Desktop/ricerca/output_repos_c_ICV/CVE-2023-40216/repo/sys/dev/raidframe/rf_layout.c",
    "lines": "501-517",
    "snippet": "RF_StripeNum_t \nrf_MapStripeIDToParityStripeID(layoutPtr, stripeID, which_ru)\n\tRF_RaidLayout_t *layoutPtr;\n\tRF_StripeNum_t stripeID;\n\tRF_ReconUnitNum_t *which_ru;\n{\n\tRF_StripeNum_t parityStripeID;\n\n\t/* quick exit in the common case of SUsPerPU==1 */\n\tif ((layoutPtr->SUsPerPU == 1) || !layoutPtr->map->MapSIDToPSID) {\n\t\t*which_ru = 0;\n\t\treturn (stripeID);\n\t} else {\n\t\t(layoutPtr->map->MapSIDToPSID) (layoutPtr, stripeID, &parityStripeID, which_ru);\n\t}\n\treturn (parityStripeID);\n}",
    "includes": [
      "#include \"rf_reconutil.h\"",
      "#include \"rf_reconbuffer.h\"",
      "#include \"rf_parityscan.h\"",
      "#include \"rf_driver.h\"",
      "#include \"rf_general.h\"",
      "#include \"rf_evenodd.h\"",
      "#include \"rf_paritylogging.h\"",
      "#include \"rf_interdecluster.h\"",
      "#include \"rf_chaindecluster.h\"",
      "#include \"rf_raid5_rotatedspare.h\"",
      "#include \"rf_states.h\"",
      "#include \"rf_raid5.h\"",
      "#include \"rf_raid4.h\"",
      "#include \"rf_raid1.h\"",
      "#include \"rf_raid0.h\"",
      "#include \"rf_declusterPQ.h\"",
      "#include \"rf_pq.h\"",
      "#include \"rf_decluster.h\"",
      "#include \"rf_desc.h\"",
      "#include \"rf_dag.h\"",
      "#include \"rf_configure.h\"",
      "#include \"rf_raid.h\"",
      "#include \"rf_archs.h\"",
      "#include \"rf_types.h\""
    ],
    "macros_used": [],
    "globals_used": [],
    "called_functions": [
      {
        "call_info": {
          "callee": "",
          "args": [
            "layoutPtr",
            "stripeID",
            "&parityStripeID",
            "which_ru"
          ],
          "line": 514
        },
        "resolved": false,
        "reason": "library_or_external"
      }
    ],
    "contextual_snippet": "#include \"rf_reconutil.h\"\n#include \"rf_reconbuffer.h\"\n#include \"rf_parityscan.h\"\n#include \"rf_driver.h\"\n#include \"rf_general.h\"\n#include \"rf_evenodd.h\"\n#include \"rf_paritylogging.h\"\n#include \"rf_interdecluster.h\"\n#include \"rf_chaindecluster.h\"\n#include \"rf_raid5_rotatedspare.h\"\n#include \"rf_states.h\"\n#include \"rf_raid5.h\"\n#include \"rf_raid4.h\"\n#include \"rf_raid1.h\"\n#include \"rf_raid0.h\"\n#include \"rf_declusterPQ.h\"\n#include \"rf_pq.h\"\n#include \"rf_decluster.h\"\n#include \"rf_desc.h\"\n#include \"rf_dag.h\"\n#include \"rf_configure.h\"\n#include \"rf_raid.h\"\n#include \"rf_archs.h\"\n#include \"rf_types.h\"\n\nRF_StripeNum_t \nrf_MapStripeIDToParityStripeID(layoutPtr, stripeID, which_ru)\n\tRF_RaidLayout_t *layoutPtr;\n\tRF_StripeNum_t stripeID;\n\tRF_ReconUnitNum_t *which_ru;\n{\n\tRF_StripeNum_t parityStripeID;\n\n\t/* quick exit in the common case of SUsPerPU==1 */\n\tif ((layoutPtr->SUsPerPU == 1) || !layoutPtr->map->MapSIDToPSID) {\n\t\t*which_ru = 0;\n\t\treturn (stripeID);\n\t} else {\n\t\t(layoutPtr->map->MapSIDToPSID) (layoutPtr, stripeID, &parityStripeID, which_ru);\n\t}\n\treturn (parityStripeID);\n}"
  },
  {
    "function_name": "rf_ConfigureLayout",
    "container": null,
    "file": "/home/michele/Desktop/ricerca/output_repos_c_ICV/CVE-2023-40216/repo/sys/dev/raidframe/rf_layout.c",
    "lines": "424-492",
    "snippet": "int \nrf_ConfigureLayout(\n    RF_ShutdownList_t ** listp,\n    RF_Raid_t * raidPtr,\n    RF_Config_t * cfgPtr)\n{\n\tRF_RaidLayout_t *layoutPtr = &(raidPtr->Layout);\n\tRF_ParityConfig_t parityConfig;\n\tRF_LayoutSW_t *p;\n\tint     retval;\n\n\tlayoutPtr->sectorsPerStripeUnit = cfgPtr->sectPerSU;\n\tlayoutPtr->SUsPerPU = cfgPtr->SUsPerPU;\n\tlayoutPtr->SUsPerRU = cfgPtr->SUsPerRU;\n\tparityConfig = cfgPtr->parityConfig;\n\n\tif (layoutPtr->sectorsPerStripeUnit <= 0) {\n\t\tRF_ERRORMSG2(\"raid%d: Invalid sectorsPerStripeUnit: %d\\n\",\n\t\t\t     raidPtr->raidid, \n\t\t\t     (int)layoutPtr->sectorsPerStripeUnit );\n\t\treturn (EINVAL); \n\t}\n\n\tlayoutPtr->stripeUnitsPerDisk = raidPtr->sectorsPerDisk / layoutPtr->sectorsPerStripeUnit;\n\n\tp = rf_GetLayout(parityConfig);\n\tif (p == NULL) {\n\t\tRF_ERRORMSG1(\"Unknown parity configuration '%c'\", parityConfig);\n\t\treturn (EINVAL);\n\t}\n\tRF_ASSERT(p->parityConfig == parityConfig);\n\tlayoutPtr->map = p;\n\n\t/* initialize the specific layout */\n\n\tretval = (p->Configure) (listp, raidPtr, cfgPtr);\n\n\tif (retval)\n\t\treturn (retval);\n\n\tlayoutPtr->dataBytesPerStripe = layoutPtr->dataSectorsPerStripe << raidPtr->logBytesPerSector;\n\traidPtr->sectorsPerDisk = layoutPtr->stripeUnitsPerDisk * layoutPtr->sectorsPerStripeUnit;\n\n\tif (rf_forceNumFloatingReconBufs >= 0) {\n\t\traidPtr->numFloatingReconBufs = rf_forceNumFloatingReconBufs;\n\t} else {\n\t\traidPtr->numFloatingReconBufs = rf_GetDefaultNumFloatingReconBuffers(raidPtr);\n\t}\n\n\tif (rf_forceHeadSepLimit >= 0) {\n\t\traidPtr->headSepLimit = rf_forceHeadSepLimit;\n\t} else {\n\t\traidPtr->headSepLimit = rf_GetDefaultHeadSepLimit(raidPtr);\n\t}\n\n\tprintf(\"RAIDFRAME: Configure (%s): total number of sectors is %lu (%lu MB)\\n\",\n\t    layoutPtr->map->configName,\n\t    (unsigned long) raidPtr->totalSectors,\n\t    (unsigned long) (raidPtr->totalSectors / 1024 * (1 << raidPtr->logBytesPerSector) / 1024));\n\tif (raidPtr->headSepLimit >= 0) {\n\t\tprintf(\"RAIDFRAME(%s): Using %ld floating recon bufs with head sep limit %ld\\n\",\n\t\t    layoutPtr->map->configName, (long) raidPtr->numFloatingReconBufs, (long) raidPtr->headSepLimit);\n\t} else {\n\t\tprintf(\"RAIDFRAME(%s): Using %ld floating recon bufs with no head sep limit\\n\",\n\t\t    layoutPtr->map->configName, (long) raidPtr->numFloatingReconBufs);\n\t}\n\n\treturn (0);\n}",
    "includes": [
      "#include \"rf_reconutil.h\"",
      "#include \"rf_reconbuffer.h\"",
      "#include \"rf_parityscan.h\"",
      "#include \"rf_driver.h\"",
      "#include \"rf_general.h\"",
      "#include \"rf_evenodd.h\"",
      "#include \"rf_paritylogging.h\"",
      "#include \"rf_interdecluster.h\"",
      "#include \"rf_chaindecluster.h\"",
      "#include \"rf_raid5_rotatedspare.h\"",
      "#include \"rf_states.h\"",
      "#include \"rf_raid5.h\"",
      "#include \"rf_raid4.h\"",
      "#include \"rf_raid1.h\"",
      "#include \"rf_raid0.h\"",
      "#include \"rf_declusterPQ.h\"",
      "#include \"rf_pq.h\"",
      "#include \"rf_decluster.h\"",
      "#include \"rf_desc.h\"",
      "#include \"rf_dag.h\"",
      "#include \"rf_configure.h\"",
      "#include \"rf_raid.h\"",
      "#include \"rf_archs.h\"",
      "#include \"rf_types.h\""
    ],
    "macros_used": [],
    "globals_used": [],
    "called_functions": [
      {
        "call_info": {
          "callee": "printf",
          "args": [
            "\"RAIDFRAME(%s): Using %ld floating recon bufs with no head sep limit\\n\"",
            "layoutPtr->map->configName",
            "(long) raidPtr->numFloatingReconBufs"
          ],
          "line": 487
        },
        "resolved": true,
        "details": {
          "function_name": "rf_debug_printf",
          "container": null,
          "file": "/home/michele/Desktop/ricerca/output_repos_c_ICV/CVE-2023-40216/repo/sys/dev/raidframe/rf_debugprint.c",
          "lines": "82-108",
          "snippet": "void \nrf_debug_printf(s, a1, a2, a3, a4, a5, a6, a7, a8)\n\tchar   *s;\n\tvoid   *a1, *a2, *a3, *a4, *a5, *a6, *a7, *a8;\n{\n\tint     idx;\n\n\tif (rf_debugPrintUseBuffer) {\n\n\t\tRF_LOCK_MUTEX(rf_debug_print_mutex);\n\t\tidx = rf_debugprint_index;\n\t\trf_debugprint_index = (rf_debugprint_index + 1) & BUFMASK;\n\t\tRF_UNLOCK_MUTEX(rf_debug_print_mutex);\n\n\t\trf_debugprint_buf[idx].cstring = s;\n\t\trf_debugprint_buf[idx].a1 = a1;\n\t\trf_debugprint_buf[idx].a2 = a2;\n\t\trf_debugprint_buf[idx].a3 = a3;\n\t\trf_debugprint_buf[idx].a4 = a4;\n\t\trf_debugprint_buf[idx].a5 = a5;\n\t\trf_debugprint_buf[idx].a6 = a6;\n\t\trf_debugprint_buf[idx].a7 = a7;\n\t\trf_debugprint_buf[idx].a8 = a8;\n\t} else {\n\t\tprintf(s, a1, a2, a3, a4, a5, a6, a7, a8);\n\t}\n}",
          "includes": [
            "#include <sys/param.h>",
            "#include \"rf_options.h\"",
            "#include \"rf_general.h\"",
            "#include \"rf_debugprint.h\"",
            "#include \"rf_threadstuff.h\"",
            "#include \"rf_types.h\""
          ],
          "macros_used": [
            "#define BUFMASK  (BUFSIZE-1)"
          ],
          "globals_used": [
            "static struct RF_Entry_s rf_debugprint_buf[BUFSIZE];",
            "static int rf_debugprint_index = 0;"
          ],
          "called_functions": [],
          "contextual_snippet": "#include <sys/param.h>\n#include \"rf_options.h\"\n#include \"rf_general.h\"\n#include \"rf_debugprint.h\"\n#include \"rf_threadstuff.h\"\n#include \"rf_types.h\"\n\n#define BUFMASK  (BUFSIZE-1)\n\nstatic struct RF_Entry_s rf_debugprint_buf[BUFSIZE];\nstatic int rf_debugprint_index = 0;\n\nvoid \nrf_debug_printf(s, a1, a2, a3, a4, a5, a6, a7, a8)\n\tchar   *s;\n\tvoid   *a1, *a2, *a3, *a4, *a5, *a6, *a7, *a8;\n{\n\tint     idx;\n\n\tif (rf_debugPrintUseBuffer) {\n\n\t\tRF_LOCK_MUTEX(rf_debug_print_mutex);\n\t\tidx = rf_debugprint_index;\n\t\trf_debugprint_index = (rf_debugprint_index + 1) & BUFMASK;\n\t\tRF_UNLOCK_MUTEX(rf_debug_print_mutex);\n\n\t\trf_debugprint_buf[idx].cstring = s;\n\t\trf_debugprint_buf[idx].a1 = a1;\n\t\trf_debugprint_buf[idx].a2 = a2;\n\t\trf_debugprint_buf[idx].a3 = a3;\n\t\trf_debugprint_buf[idx].a4 = a4;\n\t\trf_debugprint_buf[idx].a5 = a5;\n\t\trf_debugprint_buf[idx].a6 = a6;\n\t\trf_debugprint_buf[idx].a7 = a7;\n\t\trf_debugprint_buf[idx].a8 = a8;\n\t} else {\n\t\tprintf(s, a1, a2, a3, a4, a5, a6, a7, a8);\n\t}\n}"
        }
      },
      {
        "call_info": {
          "callee": "rf_GetDefaultHeadSepLimit",
          "args": [
            "raidPtr"
          ],
          "line": 476
        },
        "resolved": true,
        "details": {
          "function_name": "rf_GetDefaultHeadSepLimitRAID5",
          "container": null,
          "file": "/home/michele/Desktop/ricerca/output_repos_c_ICV/CVE-2023-40216/repo/sys/dev/raidframe/rf_raid5.c",
          "lines": "105-109",
          "snippet": "RF_HeadSepLimit_t \nrf_GetDefaultHeadSepLimitRAID5(RF_Raid_t * raidPtr)\n{\n\treturn (10);\n}",
          "includes": [
            "#include \"rf_utils.h\"",
            "#include \"rf_map.h\"",
            "#include \"rf_general.h\"",
            "#include \"rf_dagutils.h\"",
            "#include \"rf_dagdegwr.h\"",
            "#include \"rf_dagdegrd.h\"",
            "#include \"rf_dagffwr.h\"",
            "#include \"rf_dagffrd.h\"",
            "#include \"rf_dag.h\"",
            "#include \"rf_raid5.h\"",
            "#include \"rf_raid.h\"",
            "#include \"rf_types.h\""
          ],
          "macros_used": [],
          "globals_used": [],
          "called_functions": [],
          "contextual_snippet": "#include \"rf_utils.h\"\n#include \"rf_map.h\"\n#include \"rf_general.h\"\n#include \"rf_dagutils.h\"\n#include \"rf_dagdegwr.h\"\n#include \"rf_dagdegrd.h\"\n#include \"rf_dagffwr.h\"\n#include \"rf_dagffrd.h\"\n#include \"rf_dag.h\"\n#include \"rf_raid5.h\"\n#include \"rf_raid.h\"\n#include \"rf_types.h\"\n\nRF_HeadSepLimit_t \nrf_GetDefaultHeadSepLimitRAID5(RF_Raid_t * raidPtr)\n{\n\treturn (10);\n}"
        }
      },
      {
        "call_info": {
          "callee": "rf_GetDefaultNumFloatingReconBuffers",
          "args": [
            "raidPtr"
          ],
          "line": 470
        },
        "resolved": true,
        "details": {
          "function_name": "rf_GetDefaultNumFloatingReconBuffersPQ",
          "container": null,
          "file": "/home/michele/Desktop/ricerca/output_repos_c_ICV/CVE-2023-40216/repo/sys/dev/raidframe/rf_declusterPQ.c",
          "lines": "268-275",
          "snippet": "int \nrf_GetDefaultNumFloatingReconBuffersPQ(RF_Raid_t * raidPtr)\n{\n\tint     def_decl;\n\n\tdef_decl = rf_GetDefaultNumFloatingReconBuffersDeclustered(raidPtr);\n\treturn (RF_MAX(3 * raidPtr->numCol, def_decl));\n}",
          "includes": [
            "#include \"rf_general.h\"",
            "#include \"rf_alloclist.h\"",
            "#include \"rf_utils.h\"",
            "#include \"rf_debugMem.h\"",
            "#include \"rf_declusterPQ.h\"",
            "#include \"rf_decluster.h\"",
            "#include \"rf_configure.h\"",
            "#include \"rf_raid.h\"",
            "#include \"rf_types.h\""
          ],
          "macros_used": [],
          "globals_used": [],
          "called_functions": [],
          "contextual_snippet": "#include \"rf_general.h\"\n#include \"rf_alloclist.h\"\n#include \"rf_utils.h\"\n#include \"rf_debugMem.h\"\n#include \"rf_declusterPQ.h\"\n#include \"rf_decluster.h\"\n#include \"rf_configure.h\"\n#include \"rf_raid.h\"\n#include \"rf_types.h\"\n\nint \nrf_GetDefaultNumFloatingReconBuffersPQ(RF_Raid_t * raidPtr)\n{\n\tint     def_decl;\n\n\tdef_decl = rf_GetDefaultNumFloatingReconBuffersDeclustered(raidPtr);\n\treturn (RF_MAX(3 * raidPtr->numCol, def_decl));\n}"
        }
      },
      {
        "call_info": {
          "callee": "",
          "args": [
            "listp",
            "raidPtr",
            "cfgPtr"
          ],
          "line": 459
        },
        "resolved": false,
        "reason": "library_or_external"
      },
      {
        "call_info": {
          "callee": "RF_ASSERT",
          "args": [
            "p->parityConfig == parityConfig"
          ],
          "line": 454
        },
        "resolved": false,
        "reason": "library_or_external"
      },
      {
        "call_info": {
          "callee": "RF_ERRORMSG1",
          "args": [
            "\"Unknown parity configuration '%c'\"",
            "parityConfig"
          ],
          "line": 451
        },
        "resolved": false,
        "reason": "library_or_external"
      },
      {
        "call_info": {
          "callee": "rf_GetLayout",
          "args": [
            "parityConfig"
          ],
          "line": 449
        },
        "resolved": true,
        "details": {
          "function_name": "rf_GetLayout",
          "container": null,
          "file": "/home/michele/Desktop/ricerca/output_repos_c_ICV/CVE-2023-40216/repo/sys/dev/raidframe/rf_layout.c",
          "lines": "400-413",
          "snippet": "RF_LayoutSW_t *\nrf_GetLayout(RF_ParityConfig_t parityConfig)\n{\n\tRF_LayoutSW_t *p;\n\n\t/* look up the specific layout */\n\tfor (p = &mapsw[0]; p->parityConfig; p++)\n\t\tif (p->parityConfig == parityConfig)\n\t\t\tbreak;\n\tif (!p->parityConfig)\n\t\treturn (NULL);\n\tRF_ASSERT(p->parityConfig == parityConfig);\n\treturn (p);\n}",
          "includes": [
            "#include \"rf_reconutil.h\"",
            "#include \"rf_reconbuffer.h\"",
            "#include \"rf_parityscan.h\"",
            "#include \"rf_driver.h\"",
            "#include \"rf_general.h\"",
            "#include \"rf_evenodd.h\"",
            "#include \"rf_paritylogging.h\"",
            "#include \"rf_interdecluster.h\"",
            "#include \"rf_chaindecluster.h\"",
            "#include \"rf_raid5_rotatedspare.h\"",
            "#include \"rf_states.h\"",
            "#include \"rf_raid5.h\"",
            "#include \"rf_raid4.h\"",
            "#include \"rf_raid1.h\"",
            "#include \"rf_raid0.h\"",
            "#include \"rf_declusterPQ.h\"",
            "#include \"rf_pq.h\"",
            "#include \"rf_decluster.h\"",
            "#include \"rf_desc.h\"",
            "#include \"rf_dag.h\"",
            "#include \"rf_configure.h\"",
            "#include \"rf_raid.h\"",
            "#include \"rf_archs.h\"",
            "#include \"rf_types.h\""
          ],
          "macros_used": [],
          "globals_used": [
            "static RF_LayoutSW_t mapsw[] = {\n\t/* parity declustering */\n\t{'T', \"Parity declustering\",\n\t\tRF_NK2(rf_MakeLayoutSpecificDeclustered, &distSpareNo)\n\t\tRF_NU(\n\t\t    rf_ConfigureDeclustered,\n\t\t    rf_MapSectorDeclustered, rf_MapParityDeclustered, NULL,\n\t\t    rf_IdentifyStripeDeclustered,\n\t\t    rf_RaidFiveDagSelect,\n\t\t    rf_MapSIDToPSIDDeclustered,\n\t\t    rf_GetDefaultHeadSepLimitDeclustered,\n\t\t    rf_GetDefaultNumFloatingReconBuffersDeclustered,\n\t\t    NULL, NULL,\n\t\t    rf_SubmitReconBufferBasic,\n\t\t    rf_VerifyParityBasic,\n\t\t    1,\n\t\t    DefaultStates,\n\t\t    0)\n\t},\n\n\t/* parity declustering with distributed sparing */\n\t{'D', \"Distributed sparing parity declustering\",\n\t\tRF_NK2(rf_MakeLayoutSpecificDeclustered, &distSpareYes)\n\t\tRF_NU(\n\t\t    rf_ConfigureDeclusteredDS,\n\t\t    rf_MapSectorDeclustered, rf_MapParityDeclustered, NULL,\n\t\t    rf_IdentifyStripeDeclustered,\n\t\t    rf_RaidFiveDagSelect,\n\t\t    rf_MapSIDToPSIDDeclustered,\n\t\t    rf_GetDefaultHeadSepLimitDeclustered,\n\t\t    rf_GetDefaultNumFloatingReconBuffersDeclustered,\n\t\t    rf_GetNumSpareRUsDeclustered, rf_InstallSpareTable,\n\t\t    rf_SubmitReconBufferBasic,\n\t\t    rf_VerifyParityBasic,\n\t\t    1,\n\t\t    DefaultStates,\n\t\t    RF_DISTRIBUTE_SPARE | RF_BD_DECLUSTERED)\n\t},\n\n#if RF_INCLUDE_DECL_PQ > 0\n\t/* declustered P+Q */\n\t{'Q', \"Declustered P+Q\",\n\t\tRF_NK2(rf_MakeLayoutSpecificDeclustered, &distSpareNo)\n\t\tRF_NU(\n\t\t    rf_ConfigureDeclusteredPQ,\n\t\t    rf_MapSectorDeclusteredPQ, rf_MapParityDeclusteredPQ, rf_MapQDeclusteredPQ,\n\t\t    rf_IdentifyStripeDeclusteredPQ,\n\t\t    rf_PQDagSelect,\n\t\t    rf_MapSIDToPSIDDeclustered,\n\t\t    rf_GetDefaultHeadSepLimitDeclustered,\n\t\t    rf_GetDefaultNumFloatingReconBuffersPQ,\n\t\t    NULL, NULL,\n\t\t    NULL,\n\t\t    rf_VerifyParityBasic,\n\t\t    2,\n\t\t    DefaultStates,\n\t\t    0)\n\t},\n#endif\t\t\t\t/* RF_INCLUDE_DECL_PQ > 0 */\n\n#if RF_INCLUDE_RAID5_RS > 0\n\t/* RAID 5 with rotated sparing */\n\t{'R', \"RAID Level 5 rotated sparing\",\n\t\tRF_NK2(rf_MakeLayoutSpecificNULL, NULL)\n\t\tRF_NU(\n\t\t    rf_ConfigureRAID5_RS,\n\t\t    rf_MapSectorRAID5_RS, rf_MapParityRAID5_RS, NULL,\n\t\t    rf_IdentifyStripeRAID5_RS,\n\t\t    rf_RaidFiveDagSelect,\n\t\t    rf_MapSIDToPSIDRAID5_RS,\n\t\t    rf_GetDefaultHeadSepLimitRAID5,\n\t\t    rf_GetDefaultNumFloatingReconBuffersRAID5,\n\t\t    rf_GetNumSpareRUsRAID5_RS, NULL,\n\t\t    rf_SubmitReconBufferBasic,\n\t\t    rf_VerifyParityBasic,\n\t\t    1,\n\t\t    DefaultStates,\n\t\t    RF_DISTRIBUTE_SPARE)\n\t},\n#endif\t\t\t\t/* RF_INCLUDE_RAID5_RS > 0 */\n\n#if RF_INCLUDE_CHAINDECLUSTER > 0\n\t/* Chained Declustering */\n\t{'C', \"Chained Declustering\",\n\t\tRF_NK2(rf_MakeLayoutSpecificNULL, NULL)\n\t\tRF_NU(\n\t\t    rf_ConfigureChainDecluster,\n\t\t    rf_MapSectorChainDecluster, rf_MapParityChainDecluster, NULL,\n\t\t    rf_IdentifyStripeChainDecluster,\n\t\t    rf_RAIDCDagSelect,\n\t\t    rf_MapSIDToPSIDChainDecluster,\n\t\t    NULL,\n\t\t    NULL,\n\t\t    rf_GetNumSpareRUsChainDecluster, NULL,\n\t\t    rf_SubmitReconBufferBasic,\n\t\t    rf_VerifyParityBasic,\n\t\t    1,\n\t\t    DefaultStates,\n\t\t    0)\n\t},\n#endif\t\t\t\t/* RF_INCLUDE_CHAINDECLUSTER > 0 */\n\n#if RF_INCLUDE_INTERDECLUSTER > 0\n\t/* Interleaved Declustering */\n\t{'I', \"Interleaved Declustering\",\n\t\tRF_NK2(rf_MakeLayoutSpecificNULL, NULL)\n\t\tRF_NU(\n\t\t    rf_ConfigureInterDecluster,\n\t\t    rf_MapSectorInterDecluster, rf_MapParityInterDecluster, NULL,\n\t\t    rf_IdentifyStripeInterDecluster,\n\t\t    rf_RAIDIDagSelect,\n\t\t    rf_MapSIDToPSIDInterDecluster,\n\t\t    rf_GetDefaultHeadSepLimitInterDecluster,\n\t\t    rf_GetDefaultNumFloatingReconBuffersInterDecluster,\n\t\t    rf_GetNumSpareRUsInterDecluster, NULL,\n\t\t    rf_SubmitReconBufferBasic,\n\t\t    rf_VerifyParityBasic,\n\t\t    1,\n\t\t    DefaultStates,\n\t\t    RF_DISTRIBUTE_SPARE)\n\t},\n#endif\t\t\t\t/* RF_INCLUDE_INTERDECLUSTER > 0 */\n\n#if RF_INCLUDE_RAID0 > 0\n\t/* RAID level 0 */\n\t{'0', \"RAID Level 0\",\n\t\tRF_NK2(rf_MakeLayoutSpecificNULL, NULL)\n\t\tRF_NU(\n\t\t    rf_ConfigureRAID0,\n\t\t    rf_MapSectorRAID0, rf_MapParityRAID0, NULL,\n\t\t    rf_IdentifyStripeRAID0,\n\t\t    rf_RAID0DagSelect,\n\t\t    rf_MapSIDToPSIDRAID0,\n\t\t    NULL,\n\t\t    NULL,\n\t\t    NULL, NULL,\n\t\t    NULL,\n\t\t    rf_VerifyParityRAID0,\n\t\t    0,\n\t\t    DefaultStates,\n\t\t    0)\n\t},\n#endif\t\t\t\t/* RF_INCLUDE_RAID0 > 0 */\n\n#if RF_INCLUDE_RAID1 > 0\n\t/* RAID level 1 */\n\t{'1', \"RAID Level 1\",\n\t\tRF_NK2(rf_MakeLayoutSpecificNULL, NULL)\n\t\tRF_NU(\n\t\t    rf_ConfigureRAID1,\n\t\t    rf_MapSectorRAID1, rf_MapParityRAID1, NULL,\n\t\t    rf_IdentifyStripeRAID1,\n\t\t    rf_RAID1DagSelect,\n\t\t    rf_MapSIDToPSIDRAID1,\n\t\t    NULL,\n\t\t    NULL,\n\t\t    NULL, NULL,\n\t\t    rf_SubmitReconBufferRAID1,\n\t\t    rf_VerifyParityRAID1,\n\t\t    1,\n\t\t    DefaultStates,\n\t\t    0)\n\t},\n#endif\t\t\t\t/* RF_INCLUDE_RAID1 > 0 */\n\n#if RF_INCLUDE_RAID4 > 0\n\t/* RAID level 4 */\n\t{'4', \"RAID Level 4\",\n\t\tRF_NK2(rf_MakeLayoutSpecificNULL, NULL)\n\t\tRF_NU(\n\t\t    rf_ConfigureRAID4,\n\t\t    rf_MapSectorRAID4, rf_MapParityRAID4, NULL,\n\t\t    rf_IdentifyStripeRAID4,\n\t\t    rf_RaidFiveDagSelect,\n\t\t    rf_MapSIDToPSIDRAID4,\n\t\t    rf_GetDefaultHeadSepLimitRAID4,\n\t\t    rf_GetDefaultNumFloatingReconBuffersRAID4,\n\t\t    NULL, NULL,\n\t\t    rf_SubmitReconBufferBasic,\n\t\t    rf_VerifyParityBasic,\n\t\t    1,\n\t\t    DefaultStates,\n\t\t    0)\n\t},\n#endif\t\t\t\t/* RF_INCLUDE_RAID4 > 0 */\n\n#if RF_INCLUDE_RAID5 > 0\n\t/* RAID level 5 */\n\t{'5', \"RAID Level 5\",\n\t\tRF_NK2(rf_MakeLayoutSpecificNULL, NULL)\n\t\tRF_NU(\n\t\t    rf_ConfigureRAID5,\n\t\t    rf_MapSectorRAID5, rf_MapParityRAID5, NULL,\n\t\t    rf_IdentifyStripeRAID5,\n\t\t    rf_RaidFiveDagSelect,\n\t\t    rf_MapSIDToPSIDRAID5,\n\t\t    rf_GetDefaultHeadSepLimitRAID5,\n\t\t    rf_GetDefaultNumFloatingReconBuffersRAID5,\n\t\t    NULL, NULL,\n\t\t    rf_SubmitReconBufferBasic,\n\t\t    rf_VerifyParityBasic,\n\t\t    1,\n\t\t    DefaultStates,\n\t\t    0)\n\t},\n#endif\t\t\t\t/* RF_INCLUDE_RAID5 > 0 */\n\n#if RF_INCLUDE_EVENODD > 0\n\t/* Evenodd */\n\t{'E', \"EvenOdd\",\n\t\tRF_NK2(rf_MakeLayoutSpecificNULL, NULL)\n\t\tRF_NU(\n\t\t    rf_ConfigureEvenOdd,\n\t\t    rf_MapSectorRAID5, rf_MapParityEvenOdd, rf_MapEEvenOdd,\n\t\t    rf_IdentifyStripeEvenOdd,\n\t\t    rf_EODagSelect,\n\t\t    rf_MapSIDToPSIDRAID5,\n\t\t    NULL,\n\t\t    NULL,\n\t\t    NULL, NULL,\n\t\t    NULL,\t/* no reconstruction, yet */\n\t\t    rf_VerifyParityEvenOdd,\n\t\t    2,\n\t\t    DefaultStates,\n\t\t    0)\n\t},\n#endif\t\t\t\t/* RF_INCLUDE_EVENODD > 0 */\n\n#if RF_INCLUDE_EVENODD > 0\n\t/* Declustered Evenodd */\n\t{'e', \"Declustered EvenOdd\",\n\t\tRF_NK2(rf_MakeLayoutSpecificDeclustered, &distSpareNo)\n\t\tRF_NU(\n\t\t    rf_ConfigureDeclusteredPQ,\n\t\t    rf_MapSectorDeclusteredPQ, rf_MapParityDeclusteredPQ, rf_MapQDeclusteredPQ,\n\t\t    rf_IdentifyStripeDeclusteredPQ,\n\t\t    rf_EODagSelect,\n\t\t    rf_MapSIDToPSIDRAID5,\n\t\t    rf_GetDefaultHeadSepLimitDeclustered,\n\t\t    rf_GetDefaultNumFloatingReconBuffersPQ,\n\t\t    NULL, NULL,\n\t\t    NULL,\t/* no reconstruction, yet */\n\t\t    rf_VerifyParityEvenOdd,\n\t\t    2,\n\t\t    DefaultStates,\n\t\t    0)\n\t},\n#endif\t\t\t\t/* RF_INCLUDE_EVENODD > 0 */\n\n#if RF_INCLUDE_PARITYLOGGING > 0\n\t/* parity logging */\n\t{'L', \"Parity logging\",\n\t\tRF_NK2(rf_MakeLayoutSpecificNULL, NULL)\n\t\tRF_NU(\n\t\t    rf_ConfigureParityLogging,\n\t\t    rf_MapSectorParityLogging, rf_MapParityParityLogging, NULL,\n\t\t    rf_IdentifyStripeParityLogging,\n\t\t    rf_ParityLoggingDagSelect,\n\t\t    rf_MapSIDToPSIDParityLogging,\n\t\t    rf_GetDefaultHeadSepLimitParityLogging,\n\t\t    rf_GetDefaultNumFloatingReconBuffersParityLogging,\n\t\t    NULL, NULL,\n\t\t    rf_SubmitReconBufferBasic,\n\t\t    NULL,\n\t\t    1,\n\t\t    DefaultStates,\n\t\t    0)\n\t},\n#endif\t\t\t\t/* RF_INCLUDE_PARITYLOGGING > 0 */\n\n\t/* end-of-list marker */\n\t{'\\0', NULL,\n\t\tRF_NK2(NULL, NULL)\n\t\tRF_NU(\n\t\t    NULL,\n\t\t    NULL, NULL, NULL,\n\t\t    NULL,\n\t\t    NULL,\n\t\t    NULL,\n\t\t    NULL,\n\t\t    NULL,\n\t\t    NULL, NULL,\n\t\t    NULL,\n\t\t    NULL,\n\t\t    0,\n\t\t    NULL,\n\t\t    0)\n\t}\n};"
          ],
          "called_functions": [],
          "contextual_snippet": "#include \"rf_reconutil.h\"\n#include \"rf_reconbuffer.h\"\n#include \"rf_parityscan.h\"\n#include \"rf_driver.h\"\n#include \"rf_general.h\"\n#include \"rf_evenodd.h\"\n#include \"rf_paritylogging.h\"\n#include \"rf_interdecluster.h\"\n#include \"rf_chaindecluster.h\"\n#include \"rf_raid5_rotatedspare.h\"\n#include \"rf_states.h\"\n#include \"rf_raid5.h\"\n#include \"rf_raid4.h\"\n#include \"rf_raid1.h\"\n#include \"rf_raid0.h\"\n#include \"rf_declusterPQ.h\"\n#include \"rf_pq.h\"\n#include \"rf_decluster.h\"\n#include \"rf_desc.h\"\n#include \"rf_dag.h\"\n#include \"rf_configure.h\"\n#include \"rf_raid.h\"\n#include \"rf_archs.h\"\n#include \"rf_types.h\"\n\nstatic RF_LayoutSW_t mapsw[] = {\n\t/* parity declustering */\n\t{'T', \"Parity declustering\",\n\t\tRF_NK2(rf_MakeLayoutSpecificDeclustered, &distSpareNo)\n\t\tRF_NU(\n\t\t    rf_ConfigureDeclustered,\n\t\t    rf_MapSectorDeclustered, rf_MapParityDeclustered, NULL,\n\t\t    rf_IdentifyStripeDeclustered,\n\t\t    rf_RaidFiveDagSelect,\n\t\t    rf_MapSIDToPSIDDeclustered,\n\t\t    rf_GetDefaultHeadSepLimitDeclustered,\n\t\t    rf_GetDefaultNumFloatingReconBuffersDeclustered,\n\t\t    NULL, NULL,\n\t\t    rf_SubmitReconBufferBasic,\n\t\t    rf_VerifyParityBasic,\n\t\t    1,\n\t\t    DefaultStates,\n\t\t    0)\n\t},\n\n\t/* parity declustering with distributed sparing */\n\t{'D', \"Distributed sparing parity declustering\",\n\t\tRF_NK2(rf_MakeLayoutSpecificDeclustered, &distSpareYes)\n\t\tRF_NU(\n\t\t    rf_ConfigureDeclusteredDS,\n\t\t    rf_MapSectorDeclustered, rf_MapParityDeclustered, NULL,\n\t\t    rf_IdentifyStripeDeclustered,\n\t\t    rf_RaidFiveDagSelect,\n\t\t    rf_MapSIDToPSIDDeclustered,\n\t\t    rf_GetDefaultHeadSepLimitDeclustered,\n\t\t    rf_GetDefaultNumFloatingReconBuffersDeclustered,\n\t\t    rf_GetNumSpareRUsDeclustered, rf_InstallSpareTable,\n\t\t    rf_SubmitReconBufferBasic,\n\t\t    rf_VerifyParityBasic,\n\t\t    1,\n\t\t    DefaultStates,\n\t\t    RF_DISTRIBUTE_SPARE | RF_BD_DECLUSTERED)\n\t},\n\n#if RF_INCLUDE_DECL_PQ > 0\n\t/* declustered P+Q */\n\t{'Q', \"Declustered P+Q\",\n\t\tRF_NK2(rf_MakeLayoutSpecificDeclustered, &distSpareNo)\n\t\tRF_NU(\n\t\t    rf_ConfigureDeclusteredPQ,\n\t\t    rf_MapSectorDeclusteredPQ, rf_MapParityDeclusteredPQ, rf_MapQDeclusteredPQ,\n\t\t    rf_IdentifyStripeDeclusteredPQ,\n\t\t    rf_PQDagSelect,\n\t\t    rf_MapSIDToPSIDDeclustered,\n\t\t    rf_GetDefaultHeadSepLimitDeclustered,\n\t\t    rf_GetDefaultNumFloatingReconBuffersPQ,\n\t\t    NULL, NULL,\n\t\t    NULL,\n\t\t    rf_VerifyParityBasic,\n\t\t    2,\n\t\t    DefaultStates,\n\t\t    0)\n\t},\n#endif\t\t\t\t/* RF_INCLUDE_DECL_PQ > 0 */\n\n#if RF_INCLUDE_RAID5_RS > 0\n\t/* RAID 5 with rotated sparing */\n\t{'R', \"RAID Level 5 rotated sparing\",\n\t\tRF_NK2(rf_MakeLayoutSpecificNULL, NULL)\n\t\tRF_NU(\n\t\t    rf_ConfigureRAID5_RS,\n\t\t    rf_MapSectorRAID5_RS, rf_MapParityRAID5_RS, NULL,\n\t\t    rf_IdentifyStripeRAID5_RS,\n\t\t    rf_RaidFiveDagSelect,\n\t\t    rf_MapSIDToPSIDRAID5_RS,\n\t\t    rf_GetDefaultHeadSepLimitRAID5,\n\t\t    rf_GetDefaultNumFloatingReconBuffersRAID5,\n\t\t    rf_GetNumSpareRUsRAID5_RS, NULL,\n\t\t    rf_SubmitReconBufferBasic,\n\t\t    rf_VerifyParityBasic,\n\t\t    1,\n\t\t    DefaultStates,\n\t\t    RF_DISTRIBUTE_SPARE)\n\t},\n#endif\t\t\t\t/* RF_INCLUDE_RAID5_RS > 0 */\n\n#if RF_INCLUDE_CHAINDECLUSTER > 0\n\t/* Chained Declustering */\n\t{'C', \"Chained Declustering\",\n\t\tRF_NK2(rf_MakeLayoutSpecificNULL, NULL)\n\t\tRF_NU(\n\t\t    rf_ConfigureChainDecluster,\n\t\t    rf_MapSectorChainDecluster, rf_MapParityChainDecluster, NULL,\n\t\t    rf_IdentifyStripeChainDecluster,\n\t\t    rf_RAIDCDagSelect,\n\t\t    rf_MapSIDToPSIDChainDecluster,\n\t\t    NULL,\n\t\t    NULL,\n\t\t    rf_GetNumSpareRUsChainDecluster, NULL,\n\t\t    rf_SubmitReconBufferBasic,\n\t\t    rf_VerifyParityBasic,\n\t\t    1,\n\t\t    DefaultStates,\n\t\t    0)\n\t},\n#endif\t\t\t\t/* RF_INCLUDE_CHAINDECLUSTER > 0 */\n\n#if RF_INCLUDE_INTERDECLUSTER > 0\n\t/* Interleaved Declustering */\n\t{'I', \"Interleaved Declustering\",\n\t\tRF_NK2(rf_MakeLayoutSpecificNULL, NULL)\n\t\tRF_NU(\n\t\t    rf_ConfigureInterDecluster,\n\t\t    rf_MapSectorInterDecluster, rf_MapParityInterDecluster, NULL,\n\t\t    rf_IdentifyStripeInterDecluster,\n\t\t    rf_RAIDIDagSelect,\n\t\t    rf_MapSIDToPSIDInterDecluster,\n\t\t    rf_GetDefaultHeadSepLimitInterDecluster,\n\t\t    rf_GetDefaultNumFloatingReconBuffersInterDecluster,\n\t\t    rf_GetNumSpareRUsInterDecluster, NULL,\n\t\t    rf_SubmitReconBufferBasic,\n\t\t    rf_VerifyParityBasic,\n\t\t    1,\n\t\t    DefaultStates,\n\t\t    RF_DISTRIBUTE_SPARE)\n\t},\n#endif\t\t\t\t/* RF_INCLUDE_INTERDECLUSTER > 0 */\n\n#if RF_INCLUDE_RAID0 > 0\n\t/* RAID level 0 */\n\t{'0', \"RAID Level 0\",\n\t\tRF_NK2(rf_MakeLayoutSpecificNULL, NULL)\n\t\tRF_NU(\n\t\t    rf_ConfigureRAID0,\n\t\t    rf_MapSectorRAID0, rf_MapParityRAID0, NULL,\n\t\t    rf_IdentifyStripeRAID0,\n\t\t    rf_RAID0DagSelect,\n\t\t    rf_MapSIDToPSIDRAID0,\n\t\t    NULL,\n\t\t    NULL,\n\t\t    NULL, NULL,\n\t\t    NULL,\n\t\t    rf_VerifyParityRAID0,\n\t\t    0,\n\t\t    DefaultStates,\n\t\t    0)\n\t},\n#endif\t\t\t\t/* RF_INCLUDE_RAID0 > 0 */\n\n#if RF_INCLUDE_RAID1 > 0\n\t/* RAID level 1 */\n\t{'1', \"RAID Level 1\",\n\t\tRF_NK2(rf_MakeLayoutSpecificNULL, NULL)\n\t\tRF_NU(\n\t\t    rf_ConfigureRAID1,\n\t\t    rf_MapSectorRAID1, rf_MapParityRAID1, NULL,\n\t\t    rf_IdentifyStripeRAID1,\n\t\t    rf_RAID1DagSelect,\n\t\t    rf_MapSIDToPSIDRAID1,\n\t\t    NULL,\n\t\t    NULL,\n\t\t    NULL, NULL,\n\t\t    rf_SubmitReconBufferRAID1,\n\t\t    rf_VerifyParityRAID1,\n\t\t    1,\n\t\t    DefaultStates,\n\t\t    0)\n\t},\n#endif\t\t\t\t/* RF_INCLUDE_RAID1 > 0 */\n\n#if RF_INCLUDE_RAID4 > 0\n\t/* RAID level 4 */\n\t{'4', \"RAID Level 4\",\n\t\tRF_NK2(rf_MakeLayoutSpecificNULL, NULL)\n\t\tRF_NU(\n\t\t    rf_ConfigureRAID4,\n\t\t    rf_MapSectorRAID4, rf_MapParityRAID4, NULL,\n\t\t    rf_IdentifyStripeRAID4,\n\t\t    rf_RaidFiveDagSelect,\n\t\t    rf_MapSIDToPSIDRAID4,\n\t\t    rf_GetDefaultHeadSepLimitRAID4,\n\t\t    rf_GetDefaultNumFloatingReconBuffersRAID4,\n\t\t    NULL, NULL,\n\t\t    rf_SubmitReconBufferBasic,\n\t\t    rf_VerifyParityBasic,\n\t\t    1,\n\t\t    DefaultStates,\n\t\t    0)\n\t},\n#endif\t\t\t\t/* RF_INCLUDE_RAID4 > 0 */\n\n#if RF_INCLUDE_RAID5 > 0\n\t/* RAID level 5 */\n\t{'5', \"RAID Level 5\",\n\t\tRF_NK2(rf_MakeLayoutSpecificNULL, NULL)\n\t\tRF_NU(\n\t\t    rf_ConfigureRAID5,\n\t\t    rf_MapSectorRAID5, rf_MapParityRAID5, NULL,\n\t\t    rf_IdentifyStripeRAID5,\n\t\t    rf_RaidFiveDagSelect,\n\t\t    rf_MapSIDToPSIDRAID5,\n\t\t    rf_GetDefaultHeadSepLimitRAID5,\n\t\t    rf_GetDefaultNumFloatingReconBuffersRAID5,\n\t\t    NULL, NULL,\n\t\t    rf_SubmitReconBufferBasic,\n\t\t    rf_VerifyParityBasic,\n\t\t    1,\n\t\t    DefaultStates,\n\t\t    0)\n\t},\n#endif\t\t\t\t/* RF_INCLUDE_RAID5 > 0 */\n\n#if RF_INCLUDE_EVENODD > 0\n\t/* Evenodd */\n\t{'E', \"EvenOdd\",\n\t\tRF_NK2(rf_MakeLayoutSpecificNULL, NULL)\n\t\tRF_NU(\n\t\t    rf_ConfigureEvenOdd,\n\t\t    rf_MapSectorRAID5, rf_MapParityEvenOdd, rf_MapEEvenOdd,\n\t\t    rf_IdentifyStripeEvenOdd,\n\t\t    rf_EODagSelect,\n\t\t    rf_MapSIDToPSIDRAID5,\n\t\t    NULL,\n\t\t    NULL,\n\t\t    NULL, NULL,\n\t\t    NULL,\t/* no reconstruction, yet */\n\t\t    rf_VerifyParityEvenOdd,\n\t\t    2,\n\t\t    DefaultStates,\n\t\t    0)\n\t},\n#endif\t\t\t\t/* RF_INCLUDE_EVENODD > 0 */\n\n#if RF_INCLUDE_EVENODD > 0\n\t/* Declustered Evenodd */\n\t{'e', \"Declustered EvenOdd\",\n\t\tRF_NK2(rf_MakeLayoutSpecificDeclustered, &distSpareNo)\n\t\tRF_NU(\n\t\t    rf_ConfigureDeclusteredPQ,\n\t\t    rf_MapSectorDeclusteredPQ, rf_MapParityDeclusteredPQ, rf_MapQDeclusteredPQ,\n\t\t    rf_IdentifyStripeDeclusteredPQ,\n\t\t    rf_EODagSelect,\n\t\t    rf_MapSIDToPSIDRAID5,\n\t\t    rf_GetDefaultHeadSepLimitDeclustered,\n\t\t    rf_GetDefaultNumFloatingReconBuffersPQ,\n\t\t    NULL, NULL,\n\t\t    NULL,\t/* no reconstruction, yet */\n\t\t    rf_VerifyParityEvenOdd,\n\t\t    2,\n\t\t    DefaultStates,\n\t\t    0)\n\t},\n#endif\t\t\t\t/* RF_INCLUDE_EVENODD > 0 */\n\n#if RF_INCLUDE_PARITYLOGGING > 0\n\t/* parity logging */\n\t{'L', \"Parity logging\",\n\t\tRF_NK2(rf_MakeLayoutSpecificNULL, NULL)\n\t\tRF_NU(\n\t\t    rf_ConfigureParityLogging,\n\t\t    rf_MapSectorParityLogging, rf_MapParityParityLogging, NULL,\n\t\t    rf_IdentifyStripeParityLogging,\n\t\t    rf_ParityLoggingDagSelect,\n\t\t    rf_MapSIDToPSIDParityLogging,\n\t\t    rf_GetDefaultHeadSepLimitParityLogging,\n\t\t    rf_GetDefaultNumFloatingReconBuffersParityLogging,\n\t\t    NULL, NULL,\n\t\t    rf_SubmitReconBufferBasic,\n\t\t    NULL,\n\t\t    1,\n\t\t    DefaultStates,\n\t\t    0)\n\t},\n#endif\t\t\t\t/* RF_INCLUDE_PARITYLOGGING > 0 */\n\n\t/* end-of-list marker */\n\t{'\\0', NULL,\n\t\tRF_NK2(NULL, NULL)\n\t\tRF_NU(\n\t\t    NULL,\n\t\t    NULL, NULL, NULL,\n\t\t    NULL,\n\t\t    NULL,\n\t\t    NULL,\n\t\t    NULL,\n\t\t    NULL,\n\t\t    NULL, NULL,\n\t\t    NULL,\n\t\t    NULL,\n\t\t    0,\n\t\t    NULL,\n\t\t    0)\n\t}\n};\n\nRF_LayoutSW_t *\nrf_GetLayout(RF_ParityConfig_t parityConfig)\n{\n\tRF_LayoutSW_t *p;\n\n\t/* look up the specific layout */\n\tfor (p = &mapsw[0]; p->parityConfig; p++)\n\t\tif (p->parityConfig == parityConfig)\n\t\t\tbreak;\n\tif (!p->parityConfig)\n\t\treturn (NULL);\n\tRF_ASSERT(p->parityConfig == parityConfig);\n\treturn (p);\n}"
        }
      },
      {
        "call_info": {
          "callee": "RF_ERRORMSG2",
          "args": [
            "\"raid%d: Invalid sectorsPerStripeUnit: %d\\n\"",
            "raidPtr->raidid",
            "(int)layoutPtr->sectorsPerStripeUnit"
          ],
          "line": 441
        },
        "resolved": false,
        "reason": "library_or_external"
      }
    ],
    "contextual_snippet": "#include \"rf_reconutil.h\"\n#include \"rf_reconbuffer.h\"\n#include \"rf_parityscan.h\"\n#include \"rf_driver.h\"\n#include \"rf_general.h\"\n#include \"rf_evenodd.h\"\n#include \"rf_paritylogging.h\"\n#include \"rf_interdecluster.h\"\n#include \"rf_chaindecluster.h\"\n#include \"rf_raid5_rotatedspare.h\"\n#include \"rf_states.h\"\n#include \"rf_raid5.h\"\n#include \"rf_raid4.h\"\n#include \"rf_raid1.h\"\n#include \"rf_raid0.h\"\n#include \"rf_declusterPQ.h\"\n#include \"rf_pq.h\"\n#include \"rf_decluster.h\"\n#include \"rf_desc.h\"\n#include \"rf_dag.h\"\n#include \"rf_configure.h\"\n#include \"rf_raid.h\"\n#include \"rf_archs.h\"\n#include \"rf_types.h\"\n\nint \nrf_ConfigureLayout(\n    RF_ShutdownList_t ** listp,\n    RF_Raid_t * raidPtr,\n    RF_Config_t * cfgPtr)\n{\n\tRF_RaidLayout_t *layoutPtr = &(raidPtr->Layout);\n\tRF_ParityConfig_t parityConfig;\n\tRF_LayoutSW_t *p;\n\tint     retval;\n\n\tlayoutPtr->sectorsPerStripeUnit = cfgPtr->sectPerSU;\n\tlayoutPtr->SUsPerPU = cfgPtr->SUsPerPU;\n\tlayoutPtr->SUsPerRU = cfgPtr->SUsPerRU;\n\tparityConfig = cfgPtr->parityConfig;\n\n\tif (layoutPtr->sectorsPerStripeUnit <= 0) {\n\t\tRF_ERRORMSG2(\"raid%d: Invalid sectorsPerStripeUnit: %d\\n\",\n\t\t\t     raidPtr->raidid, \n\t\t\t     (int)layoutPtr->sectorsPerStripeUnit );\n\t\treturn (EINVAL); \n\t}\n\n\tlayoutPtr->stripeUnitsPerDisk = raidPtr->sectorsPerDisk / layoutPtr->sectorsPerStripeUnit;\n\n\tp = rf_GetLayout(parityConfig);\n\tif (p == NULL) {\n\t\tRF_ERRORMSG1(\"Unknown parity configuration '%c'\", parityConfig);\n\t\treturn (EINVAL);\n\t}\n\tRF_ASSERT(p->parityConfig == parityConfig);\n\tlayoutPtr->map = p;\n\n\t/* initialize the specific layout */\n\n\tretval = (p->Configure) (listp, raidPtr, cfgPtr);\n\n\tif (retval)\n\t\treturn (retval);\n\n\tlayoutPtr->dataBytesPerStripe = layoutPtr->dataSectorsPerStripe << raidPtr->logBytesPerSector;\n\traidPtr->sectorsPerDisk = layoutPtr->stripeUnitsPerDisk * layoutPtr->sectorsPerStripeUnit;\n\n\tif (rf_forceNumFloatingReconBufs >= 0) {\n\t\traidPtr->numFloatingReconBufs = rf_forceNumFloatingReconBufs;\n\t} else {\n\t\traidPtr->numFloatingReconBufs = rf_GetDefaultNumFloatingReconBuffers(raidPtr);\n\t}\n\n\tif (rf_forceHeadSepLimit >= 0) {\n\t\traidPtr->headSepLimit = rf_forceHeadSepLimit;\n\t} else {\n\t\traidPtr->headSepLimit = rf_GetDefaultHeadSepLimit(raidPtr);\n\t}\n\n\tprintf(\"RAIDFRAME: Configure (%s): total number of sectors is %lu (%lu MB)\\n\",\n\t    layoutPtr->map->configName,\n\t    (unsigned long) raidPtr->totalSectors,\n\t    (unsigned long) (raidPtr->totalSectors / 1024 * (1 << raidPtr->logBytesPerSector) / 1024));\n\tif (raidPtr->headSepLimit >= 0) {\n\t\tprintf(\"RAIDFRAME(%s): Using %ld floating recon bufs with head sep limit %ld\\n\",\n\t\t    layoutPtr->map->configName, (long) raidPtr->numFloatingReconBufs, (long) raidPtr->headSepLimit);\n\t} else {\n\t\tprintf(\"RAIDFRAME(%s): Using %ld floating recon bufs with no head sep limit\\n\",\n\t\t    layoutPtr->map->configName, (long) raidPtr->numFloatingReconBufs);\n\t}\n\n\treturn (0);\n}"
  },
  {
    "function_name": "rf_GetLayout",
    "container": null,
    "file": "/home/michele/Desktop/ricerca/output_repos_c_ICV/CVE-2023-40216/repo/sys/dev/raidframe/rf_layout.c",
    "lines": "400-413",
    "snippet": "RF_LayoutSW_t *\nrf_GetLayout(RF_ParityConfig_t parityConfig)\n{\n\tRF_LayoutSW_t *p;\n\n\t/* look up the specific layout */\n\tfor (p = &mapsw[0]; p->parityConfig; p++)\n\t\tif (p->parityConfig == parityConfig)\n\t\t\tbreak;\n\tif (!p->parityConfig)\n\t\treturn (NULL);\n\tRF_ASSERT(p->parityConfig == parityConfig);\n\treturn (p);\n}",
    "includes": [
      "#include \"rf_reconutil.h\"",
      "#include \"rf_reconbuffer.h\"",
      "#include \"rf_parityscan.h\"",
      "#include \"rf_driver.h\"",
      "#include \"rf_general.h\"",
      "#include \"rf_evenodd.h\"",
      "#include \"rf_paritylogging.h\"",
      "#include \"rf_interdecluster.h\"",
      "#include \"rf_chaindecluster.h\"",
      "#include \"rf_raid5_rotatedspare.h\"",
      "#include \"rf_states.h\"",
      "#include \"rf_raid5.h\"",
      "#include \"rf_raid4.h\"",
      "#include \"rf_raid1.h\"",
      "#include \"rf_raid0.h\"",
      "#include \"rf_declusterPQ.h\"",
      "#include \"rf_pq.h\"",
      "#include \"rf_decluster.h\"",
      "#include \"rf_desc.h\"",
      "#include \"rf_dag.h\"",
      "#include \"rf_configure.h\"",
      "#include \"rf_raid.h\"",
      "#include \"rf_archs.h\"",
      "#include \"rf_types.h\""
    ],
    "macros_used": [],
    "globals_used": [
      "static RF_LayoutSW_t mapsw[] = {\n\t/* parity declustering */\n\t{'T', \"Parity declustering\",\n\t\tRF_NK2(rf_MakeLayoutSpecificDeclustered, &distSpareNo)\n\t\tRF_NU(\n\t\t    rf_ConfigureDeclustered,\n\t\t    rf_MapSectorDeclustered, rf_MapParityDeclustered, NULL,\n\t\t    rf_IdentifyStripeDeclustered,\n\t\t    rf_RaidFiveDagSelect,\n\t\t    rf_MapSIDToPSIDDeclustered,\n\t\t    rf_GetDefaultHeadSepLimitDeclustered,\n\t\t    rf_GetDefaultNumFloatingReconBuffersDeclustered,\n\t\t    NULL, NULL,\n\t\t    rf_SubmitReconBufferBasic,\n\t\t    rf_VerifyParityBasic,\n\t\t    1,\n\t\t    DefaultStates,\n\t\t    0)\n\t},\n\n\t/* parity declustering with distributed sparing */\n\t{'D', \"Distributed sparing parity declustering\",\n\t\tRF_NK2(rf_MakeLayoutSpecificDeclustered, &distSpareYes)\n\t\tRF_NU(\n\t\t    rf_ConfigureDeclusteredDS,\n\t\t    rf_MapSectorDeclustered, rf_MapParityDeclustered, NULL,\n\t\t    rf_IdentifyStripeDeclustered,\n\t\t    rf_RaidFiveDagSelect,\n\t\t    rf_MapSIDToPSIDDeclustered,\n\t\t    rf_GetDefaultHeadSepLimitDeclustered,\n\t\t    rf_GetDefaultNumFloatingReconBuffersDeclustered,\n\t\t    rf_GetNumSpareRUsDeclustered, rf_InstallSpareTable,\n\t\t    rf_SubmitReconBufferBasic,\n\t\t    rf_VerifyParityBasic,\n\t\t    1,\n\t\t    DefaultStates,\n\t\t    RF_DISTRIBUTE_SPARE | RF_BD_DECLUSTERED)\n\t},\n\n#if RF_INCLUDE_DECL_PQ > 0\n\t/* declustered P+Q */\n\t{'Q', \"Declustered P+Q\",\n\t\tRF_NK2(rf_MakeLayoutSpecificDeclustered, &distSpareNo)\n\t\tRF_NU(\n\t\t    rf_ConfigureDeclusteredPQ,\n\t\t    rf_MapSectorDeclusteredPQ, rf_MapParityDeclusteredPQ, rf_MapQDeclusteredPQ,\n\t\t    rf_IdentifyStripeDeclusteredPQ,\n\t\t    rf_PQDagSelect,\n\t\t    rf_MapSIDToPSIDDeclustered,\n\t\t    rf_GetDefaultHeadSepLimitDeclustered,\n\t\t    rf_GetDefaultNumFloatingReconBuffersPQ,\n\t\t    NULL, NULL,\n\t\t    NULL,\n\t\t    rf_VerifyParityBasic,\n\t\t    2,\n\t\t    DefaultStates,\n\t\t    0)\n\t},\n#endif\t\t\t\t/* RF_INCLUDE_DECL_PQ > 0 */\n\n#if RF_INCLUDE_RAID5_RS > 0\n\t/* RAID 5 with rotated sparing */\n\t{'R', \"RAID Level 5 rotated sparing\",\n\t\tRF_NK2(rf_MakeLayoutSpecificNULL, NULL)\n\t\tRF_NU(\n\t\t    rf_ConfigureRAID5_RS,\n\t\t    rf_MapSectorRAID5_RS, rf_MapParityRAID5_RS, NULL,\n\t\t    rf_IdentifyStripeRAID5_RS,\n\t\t    rf_RaidFiveDagSelect,\n\t\t    rf_MapSIDToPSIDRAID5_RS,\n\t\t    rf_GetDefaultHeadSepLimitRAID5,\n\t\t    rf_GetDefaultNumFloatingReconBuffersRAID5,\n\t\t    rf_GetNumSpareRUsRAID5_RS, NULL,\n\t\t    rf_SubmitReconBufferBasic,\n\t\t    rf_VerifyParityBasic,\n\t\t    1,\n\t\t    DefaultStates,\n\t\t    RF_DISTRIBUTE_SPARE)\n\t},\n#endif\t\t\t\t/* RF_INCLUDE_RAID5_RS > 0 */\n\n#if RF_INCLUDE_CHAINDECLUSTER > 0\n\t/* Chained Declustering */\n\t{'C', \"Chained Declustering\",\n\t\tRF_NK2(rf_MakeLayoutSpecificNULL, NULL)\n\t\tRF_NU(\n\t\t    rf_ConfigureChainDecluster,\n\t\t    rf_MapSectorChainDecluster, rf_MapParityChainDecluster, NULL,\n\t\t    rf_IdentifyStripeChainDecluster,\n\t\t    rf_RAIDCDagSelect,\n\t\t    rf_MapSIDToPSIDChainDecluster,\n\t\t    NULL,\n\t\t    NULL,\n\t\t    rf_GetNumSpareRUsChainDecluster, NULL,\n\t\t    rf_SubmitReconBufferBasic,\n\t\t    rf_VerifyParityBasic,\n\t\t    1,\n\t\t    DefaultStates,\n\t\t    0)\n\t},\n#endif\t\t\t\t/* RF_INCLUDE_CHAINDECLUSTER > 0 */\n\n#if RF_INCLUDE_INTERDECLUSTER > 0\n\t/* Interleaved Declustering */\n\t{'I', \"Interleaved Declustering\",\n\t\tRF_NK2(rf_MakeLayoutSpecificNULL, NULL)\n\t\tRF_NU(\n\t\t    rf_ConfigureInterDecluster,\n\t\t    rf_MapSectorInterDecluster, rf_MapParityInterDecluster, NULL,\n\t\t    rf_IdentifyStripeInterDecluster,\n\t\t    rf_RAIDIDagSelect,\n\t\t    rf_MapSIDToPSIDInterDecluster,\n\t\t    rf_GetDefaultHeadSepLimitInterDecluster,\n\t\t    rf_GetDefaultNumFloatingReconBuffersInterDecluster,\n\t\t    rf_GetNumSpareRUsInterDecluster, NULL,\n\t\t    rf_SubmitReconBufferBasic,\n\t\t    rf_VerifyParityBasic,\n\t\t    1,\n\t\t    DefaultStates,\n\t\t    RF_DISTRIBUTE_SPARE)\n\t},\n#endif\t\t\t\t/* RF_INCLUDE_INTERDECLUSTER > 0 */\n\n#if RF_INCLUDE_RAID0 > 0\n\t/* RAID level 0 */\n\t{'0', \"RAID Level 0\",\n\t\tRF_NK2(rf_MakeLayoutSpecificNULL, NULL)\n\t\tRF_NU(\n\t\t    rf_ConfigureRAID0,\n\t\t    rf_MapSectorRAID0, rf_MapParityRAID0, NULL,\n\t\t    rf_IdentifyStripeRAID0,\n\t\t    rf_RAID0DagSelect,\n\t\t    rf_MapSIDToPSIDRAID0,\n\t\t    NULL,\n\t\t    NULL,\n\t\t    NULL, NULL,\n\t\t    NULL,\n\t\t    rf_VerifyParityRAID0,\n\t\t    0,\n\t\t    DefaultStates,\n\t\t    0)\n\t},\n#endif\t\t\t\t/* RF_INCLUDE_RAID0 > 0 */\n\n#if RF_INCLUDE_RAID1 > 0\n\t/* RAID level 1 */\n\t{'1', \"RAID Level 1\",\n\t\tRF_NK2(rf_MakeLayoutSpecificNULL, NULL)\n\t\tRF_NU(\n\t\t    rf_ConfigureRAID1,\n\t\t    rf_MapSectorRAID1, rf_MapParityRAID1, NULL,\n\t\t    rf_IdentifyStripeRAID1,\n\t\t    rf_RAID1DagSelect,\n\t\t    rf_MapSIDToPSIDRAID1,\n\t\t    NULL,\n\t\t    NULL,\n\t\t    NULL, NULL,\n\t\t    rf_SubmitReconBufferRAID1,\n\t\t    rf_VerifyParityRAID1,\n\t\t    1,\n\t\t    DefaultStates,\n\t\t    0)\n\t},\n#endif\t\t\t\t/* RF_INCLUDE_RAID1 > 0 */\n\n#if RF_INCLUDE_RAID4 > 0\n\t/* RAID level 4 */\n\t{'4', \"RAID Level 4\",\n\t\tRF_NK2(rf_MakeLayoutSpecificNULL, NULL)\n\t\tRF_NU(\n\t\t    rf_ConfigureRAID4,\n\t\t    rf_MapSectorRAID4, rf_MapParityRAID4, NULL,\n\t\t    rf_IdentifyStripeRAID4,\n\t\t    rf_RaidFiveDagSelect,\n\t\t    rf_MapSIDToPSIDRAID4,\n\t\t    rf_GetDefaultHeadSepLimitRAID4,\n\t\t    rf_GetDefaultNumFloatingReconBuffersRAID4,\n\t\t    NULL, NULL,\n\t\t    rf_SubmitReconBufferBasic,\n\t\t    rf_VerifyParityBasic,\n\t\t    1,\n\t\t    DefaultStates,\n\t\t    0)\n\t},\n#endif\t\t\t\t/* RF_INCLUDE_RAID4 > 0 */\n\n#if RF_INCLUDE_RAID5 > 0\n\t/* RAID level 5 */\n\t{'5', \"RAID Level 5\",\n\t\tRF_NK2(rf_MakeLayoutSpecificNULL, NULL)\n\t\tRF_NU(\n\t\t    rf_ConfigureRAID5,\n\t\t    rf_MapSectorRAID5, rf_MapParityRAID5, NULL,\n\t\t    rf_IdentifyStripeRAID5,\n\t\t    rf_RaidFiveDagSelect,\n\t\t    rf_MapSIDToPSIDRAID5,\n\t\t    rf_GetDefaultHeadSepLimitRAID5,\n\t\t    rf_GetDefaultNumFloatingReconBuffersRAID5,\n\t\t    NULL, NULL,\n\t\t    rf_SubmitReconBufferBasic,\n\t\t    rf_VerifyParityBasic,\n\t\t    1,\n\t\t    DefaultStates,\n\t\t    0)\n\t},\n#endif\t\t\t\t/* RF_INCLUDE_RAID5 > 0 */\n\n#if RF_INCLUDE_EVENODD > 0\n\t/* Evenodd */\n\t{'E', \"EvenOdd\",\n\t\tRF_NK2(rf_MakeLayoutSpecificNULL, NULL)\n\t\tRF_NU(\n\t\t    rf_ConfigureEvenOdd,\n\t\t    rf_MapSectorRAID5, rf_MapParityEvenOdd, rf_MapEEvenOdd,\n\t\t    rf_IdentifyStripeEvenOdd,\n\t\t    rf_EODagSelect,\n\t\t    rf_MapSIDToPSIDRAID5,\n\t\t    NULL,\n\t\t    NULL,\n\t\t    NULL, NULL,\n\t\t    NULL,\t/* no reconstruction, yet */\n\t\t    rf_VerifyParityEvenOdd,\n\t\t    2,\n\t\t    DefaultStates,\n\t\t    0)\n\t},\n#endif\t\t\t\t/* RF_INCLUDE_EVENODD > 0 */\n\n#if RF_INCLUDE_EVENODD > 0\n\t/* Declustered Evenodd */\n\t{'e', \"Declustered EvenOdd\",\n\t\tRF_NK2(rf_MakeLayoutSpecificDeclustered, &distSpareNo)\n\t\tRF_NU(\n\t\t    rf_ConfigureDeclusteredPQ,\n\t\t    rf_MapSectorDeclusteredPQ, rf_MapParityDeclusteredPQ, rf_MapQDeclusteredPQ,\n\t\t    rf_IdentifyStripeDeclusteredPQ,\n\t\t    rf_EODagSelect,\n\t\t    rf_MapSIDToPSIDRAID5,\n\t\t    rf_GetDefaultHeadSepLimitDeclustered,\n\t\t    rf_GetDefaultNumFloatingReconBuffersPQ,\n\t\t    NULL, NULL,\n\t\t    NULL,\t/* no reconstruction, yet */\n\t\t    rf_VerifyParityEvenOdd,\n\t\t    2,\n\t\t    DefaultStates,\n\t\t    0)\n\t},\n#endif\t\t\t\t/* RF_INCLUDE_EVENODD > 0 */\n\n#if RF_INCLUDE_PARITYLOGGING > 0\n\t/* parity logging */\n\t{'L', \"Parity logging\",\n\t\tRF_NK2(rf_MakeLayoutSpecificNULL, NULL)\n\t\tRF_NU(\n\t\t    rf_ConfigureParityLogging,\n\t\t    rf_MapSectorParityLogging, rf_MapParityParityLogging, NULL,\n\t\t    rf_IdentifyStripeParityLogging,\n\t\t    rf_ParityLoggingDagSelect,\n\t\t    rf_MapSIDToPSIDParityLogging,\n\t\t    rf_GetDefaultHeadSepLimitParityLogging,\n\t\t    rf_GetDefaultNumFloatingReconBuffersParityLogging,\n\t\t    NULL, NULL,\n\t\t    rf_SubmitReconBufferBasic,\n\t\t    NULL,\n\t\t    1,\n\t\t    DefaultStates,\n\t\t    0)\n\t},\n#endif\t\t\t\t/* RF_INCLUDE_PARITYLOGGING > 0 */\n\n\t/* end-of-list marker */\n\t{'\\0', NULL,\n\t\tRF_NK2(NULL, NULL)\n\t\tRF_NU(\n\t\t    NULL,\n\t\t    NULL, NULL, NULL,\n\t\t    NULL,\n\t\t    NULL,\n\t\t    NULL,\n\t\t    NULL,\n\t\t    NULL,\n\t\t    NULL, NULL,\n\t\t    NULL,\n\t\t    NULL,\n\t\t    0,\n\t\t    NULL,\n\t\t    0)\n\t}\n};"
    ],
    "called_functions": [
      {
        "call_info": {
          "callee": "RF_ASSERT",
          "args": [
            "p->parityConfig == parityConfig"
          ],
          "line": 411
        },
        "resolved": false,
        "reason": "library_or_external"
      }
    ],
    "contextual_snippet": "#include \"rf_reconutil.h\"\n#include \"rf_reconbuffer.h\"\n#include \"rf_parityscan.h\"\n#include \"rf_driver.h\"\n#include \"rf_general.h\"\n#include \"rf_evenodd.h\"\n#include \"rf_paritylogging.h\"\n#include \"rf_interdecluster.h\"\n#include \"rf_chaindecluster.h\"\n#include \"rf_raid5_rotatedspare.h\"\n#include \"rf_states.h\"\n#include \"rf_raid5.h\"\n#include \"rf_raid4.h\"\n#include \"rf_raid1.h\"\n#include \"rf_raid0.h\"\n#include \"rf_declusterPQ.h\"\n#include \"rf_pq.h\"\n#include \"rf_decluster.h\"\n#include \"rf_desc.h\"\n#include \"rf_dag.h\"\n#include \"rf_configure.h\"\n#include \"rf_raid.h\"\n#include \"rf_archs.h\"\n#include \"rf_types.h\"\n\nstatic RF_LayoutSW_t mapsw[] = {\n\t/* parity declustering */\n\t{'T', \"Parity declustering\",\n\t\tRF_NK2(rf_MakeLayoutSpecificDeclustered, &distSpareNo)\n\t\tRF_NU(\n\t\t    rf_ConfigureDeclustered,\n\t\t    rf_MapSectorDeclustered, rf_MapParityDeclustered, NULL,\n\t\t    rf_IdentifyStripeDeclustered,\n\t\t    rf_RaidFiveDagSelect,\n\t\t    rf_MapSIDToPSIDDeclustered,\n\t\t    rf_GetDefaultHeadSepLimitDeclustered,\n\t\t    rf_GetDefaultNumFloatingReconBuffersDeclustered,\n\t\t    NULL, NULL,\n\t\t    rf_SubmitReconBufferBasic,\n\t\t    rf_VerifyParityBasic,\n\t\t    1,\n\t\t    DefaultStates,\n\t\t    0)\n\t},\n\n\t/* parity declustering with distributed sparing */\n\t{'D', \"Distributed sparing parity declustering\",\n\t\tRF_NK2(rf_MakeLayoutSpecificDeclustered, &distSpareYes)\n\t\tRF_NU(\n\t\t    rf_ConfigureDeclusteredDS,\n\t\t    rf_MapSectorDeclustered, rf_MapParityDeclustered, NULL,\n\t\t    rf_IdentifyStripeDeclustered,\n\t\t    rf_RaidFiveDagSelect,\n\t\t    rf_MapSIDToPSIDDeclustered,\n\t\t    rf_GetDefaultHeadSepLimitDeclustered,\n\t\t    rf_GetDefaultNumFloatingReconBuffersDeclustered,\n\t\t    rf_GetNumSpareRUsDeclustered, rf_InstallSpareTable,\n\t\t    rf_SubmitReconBufferBasic,\n\t\t    rf_VerifyParityBasic,\n\t\t    1,\n\t\t    DefaultStates,\n\t\t    RF_DISTRIBUTE_SPARE | RF_BD_DECLUSTERED)\n\t},\n\n#if RF_INCLUDE_DECL_PQ > 0\n\t/* declustered P+Q */\n\t{'Q', \"Declustered P+Q\",\n\t\tRF_NK2(rf_MakeLayoutSpecificDeclustered, &distSpareNo)\n\t\tRF_NU(\n\t\t    rf_ConfigureDeclusteredPQ,\n\t\t    rf_MapSectorDeclusteredPQ, rf_MapParityDeclusteredPQ, rf_MapQDeclusteredPQ,\n\t\t    rf_IdentifyStripeDeclusteredPQ,\n\t\t    rf_PQDagSelect,\n\t\t    rf_MapSIDToPSIDDeclustered,\n\t\t    rf_GetDefaultHeadSepLimitDeclustered,\n\t\t    rf_GetDefaultNumFloatingReconBuffersPQ,\n\t\t    NULL, NULL,\n\t\t    NULL,\n\t\t    rf_VerifyParityBasic,\n\t\t    2,\n\t\t    DefaultStates,\n\t\t    0)\n\t},\n#endif\t\t\t\t/* RF_INCLUDE_DECL_PQ > 0 */\n\n#if RF_INCLUDE_RAID5_RS > 0\n\t/* RAID 5 with rotated sparing */\n\t{'R', \"RAID Level 5 rotated sparing\",\n\t\tRF_NK2(rf_MakeLayoutSpecificNULL, NULL)\n\t\tRF_NU(\n\t\t    rf_ConfigureRAID5_RS,\n\t\t    rf_MapSectorRAID5_RS, rf_MapParityRAID5_RS, NULL,\n\t\t    rf_IdentifyStripeRAID5_RS,\n\t\t    rf_RaidFiveDagSelect,\n\t\t    rf_MapSIDToPSIDRAID5_RS,\n\t\t    rf_GetDefaultHeadSepLimitRAID5,\n\t\t    rf_GetDefaultNumFloatingReconBuffersRAID5,\n\t\t    rf_GetNumSpareRUsRAID5_RS, NULL,\n\t\t    rf_SubmitReconBufferBasic,\n\t\t    rf_VerifyParityBasic,\n\t\t    1,\n\t\t    DefaultStates,\n\t\t    RF_DISTRIBUTE_SPARE)\n\t},\n#endif\t\t\t\t/* RF_INCLUDE_RAID5_RS > 0 */\n\n#if RF_INCLUDE_CHAINDECLUSTER > 0\n\t/* Chained Declustering */\n\t{'C', \"Chained Declustering\",\n\t\tRF_NK2(rf_MakeLayoutSpecificNULL, NULL)\n\t\tRF_NU(\n\t\t    rf_ConfigureChainDecluster,\n\t\t    rf_MapSectorChainDecluster, rf_MapParityChainDecluster, NULL,\n\t\t    rf_IdentifyStripeChainDecluster,\n\t\t    rf_RAIDCDagSelect,\n\t\t    rf_MapSIDToPSIDChainDecluster,\n\t\t    NULL,\n\t\t    NULL,\n\t\t    rf_GetNumSpareRUsChainDecluster, NULL,\n\t\t    rf_SubmitReconBufferBasic,\n\t\t    rf_VerifyParityBasic,\n\t\t    1,\n\t\t    DefaultStates,\n\t\t    0)\n\t},\n#endif\t\t\t\t/* RF_INCLUDE_CHAINDECLUSTER > 0 */\n\n#if RF_INCLUDE_INTERDECLUSTER > 0\n\t/* Interleaved Declustering */\n\t{'I', \"Interleaved Declustering\",\n\t\tRF_NK2(rf_MakeLayoutSpecificNULL, NULL)\n\t\tRF_NU(\n\t\t    rf_ConfigureInterDecluster,\n\t\t    rf_MapSectorInterDecluster, rf_MapParityInterDecluster, NULL,\n\t\t    rf_IdentifyStripeInterDecluster,\n\t\t    rf_RAIDIDagSelect,\n\t\t    rf_MapSIDToPSIDInterDecluster,\n\t\t    rf_GetDefaultHeadSepLimitInterDecluster,\n\t\t    rf_GetDefaultNumFloatingReconBuffersInterDecluster,\n\t\t    rf_GetNumSpareRUsInterDecluster, NULL,\n\t\t    rf_SubmitReconBufferBasic,\n\t\t    rf_VerifyParityBasic,\n\t\t    1,\n\t\t    DefaultStates,\n\t\t    RF_DISTRIBUTE_SPARE)\n\t},\n#endif\t\t\t\t/* RF_INCLUDE_INTERDECLUSTER > 0 */\n\n#if RF_INCLUDE_RAID0 > 0\n\t/* RAID level 0 */\n\t{'0', \"RAID Level 0\",\n\t\tRF_NK2(rf_MakeLayoutSpecificNULL, NULL)\n\t\tRF_NU(\n\t\t    rf_ConfigureRAID0,\n\t\t    rf_MapSectorRAID0, rf_MapParityRAID0, NULL,\n\t\t    rf_IdentifyStripeRAID0,\n\t\t    rf_RAID0DagSelect,\n\t\t    rf_MapSIDToPSIDRAID0,\n\t\t    NULL,\n\t\t    NULL,\n\t\t    NULL, NULL,\n\t\t    NULL,\n\t\t    rf_VerifyParityRAID0,\n\t\t    0,\n\t\t    DefaultStates,\n\t\t    0)\n\t},\n#endif\t\t\t\t/* RF_INCLUDE_RAID0 > 0 */\n\n#if RF_INCLUDE_RAID1 > 0\n\t/* RAID level 1 */\n\t{'1', \"RAID Level 1\",\n\t\tRF_NK2(rf_MakeLayoutSpecificNULL, NULL)\n\t\tRF_NU(\n\t\t    rf_ConfigureRAID1,\n\t\t    rf_MapSectorRAID1, rf_MapParityRAID1, NULL,\n\t\t    rf_IdentifyStripeRAID1,\n\t\t    rf_RAID1DagSelect,\n\t\t    rf_MapSIDToPSIDRAID1,\n\t\t    NULL,\n\t\t    NULL,\n\t\t    NULL, NULL,\n\t\t    rf_SubmitReconBufferRAID1,\n\t\t    rf_VerifyParityRAID1,\n\t\t    1,\n\t\t    DefaultStates,\n\t\t    0)\n\t},\n#endif\t\t\t\t/* RF_INCLUDE_RAID1 > 0 */\n\n#if RF_INCLUDE_RAID4 > 0\n\t/* RAID level 4 */\n\t{'4', \"RAID Level 4\",\n\t\tRF_NK2(rf_MakeLayoutSpecificNULL, NULL)\n\t\tRF_NU(\n\t\t    rf_ConfigureRAID4,\n\t\t    rf_MapSectorRAID4, rf_MapParityRAID4, NULL,\n\t\t    rf_IdentifyStripeRAID4,\n\t\t    rf_RaidFiveDagSelect,\n\t\t    rf_MapSIDToPSIDRAID4,\n\t\t    rf_GetDefaultHeadSepLimitRAID4,\n\t\t    rf_GetDefaultNumFloatingReconBuffersRAID4,\n\t\t    NULL, NULL,\n\t\t    rf_SubmitReconBufferBasic,\n\t\t    rf_VerifyParityBasic,\n\t\t    1,\n\t\t    DefaultStates,\n\t\t    0)\n\t},\n#endif\t\t\t\t/* RF_INCLUDE_RAID4 > 0 */\n\n#if RF_INCLUDE_RAID5 > 0\n\t/* RAID level 5 */\n\t{'5', \"RAID Level 5\",\n\t\tRF_NK2(rf_MakeLayoutSpecificNULL, NULL)\n\t\tRF_NU(\n\t\t    rf_ConfigureRAID5,\n\t\t    rf_MapSectorRAID5, rf_MapParityRAID5, NULL,\n\t\t    rf_IdentifyStripeRAID5,\n\t\t    rf_RaidFiveDagSelect,\n\t\t    rf_MapSIDToPSIDRAID5,\n\t\t    rf_GetDefaultHeadSepLimitRAID5,\n\t\t    rf_GetDefaultNumFloatingReconBuffersRAID5,\n\t\t    NULL, NULL,\n\t\t    rf_SubmitReconBufferBasic,\n\t\t    rf_VerifyParityBasic,\n\t\t    1,\n\t\t    DefaultStates,\n\t\t    0)\n\t},\n#endif\t\t\t\t/* RF_INCLUDE_RAID5 > 0 */\n\n#if RF_INCLUDE_EVENODD > 0\n\t/* Evenodd */\n\t{'E', \"EvenOdd\",\n\t\tRF_NK2(rf_MakeLayoutSpecificNULL, NULL)\n\t\tRF_NU(\n\t\t    rf_ConfigureEvenOdd,\n\t\t    rf_MapSectorRAID5, rf_MapParityEvenOdd, rf_MapEEvenOdd,\n\t\t    rf_IdentifyStripeEvenOdd,\n\t\t    rf_EODagSelect,\n\t\t    rf_MapSIDToPSIDRAID5,\n\t\t    NULL,\n\t\t    NULL,\n\t\t    NULL, NULL,\n\t\t    NULL,\t/* no reconstruction, yet */\n\t\t    rf_VerifyParityEvenOdd,\n\t\t    2,\n\t\t    DefaultStates,\n\t\t    0)\n\t},\n#endif\t\t\t\t/* RF_INCLUDE_EVENODD > 0 */\n\n#if RF_INCLUDE_EVENODD > 0\n\t/* Declustered Evenodd */\n\t{'e', \"Declustered EvenOdd\",\n\t\tRF_NK2(rf_MakeLayoutSpecificDeclustered, &distSpareNo)\n\t\tRF_NU(\n\t\t    rf_ConfigureDeclusteredPQ,\n\t\t    rf_MapSectorDeclusteredPQ, rf_MapParityDeclusteredPQ, rf_MapQDeclusteredPQ,\n\t\t    rf_IdentifyStripeDeclusteredPQ,\n\t\t    rf_EODagSelect,\n\t\t    rf_MapSIDToPSIDRAID5,\n\t\t    rf_GetDefaultHeadSepLimitDeclustered,\n\t\t    rf_GetDefaultNumFloatingReconBuffersPQ,\n\t\t    NULL, NULL,\n\t\t    NULL,\t/* no reconstruction, yet */\n\t\t    rf_VerifyParityEvenOdd,\n\t\t    2,\n\t\t    DefaultStates,\n\t\t    0)\n\t},\n#endif\t\t\t\t/* RF_INCLUDE_EVENODD > 0 */\n\n#if RF_INCLUDE_PARITYLOGGING > 0\n\t/* parity logging */\n\t{'L', \"Parity logging\",\n\t\tRF_NK2(rf_MakeLayoutSpecificNULL, NULL)\n\t\tRF_NU(\n\t\t    rf_ConfigureParityLogging,\n\t\t    rf_MapSectorParityLogging, rf_MapParityParityLogging, NULL,\n\t\t    rf_IdentifyStripeParityLogging,\n\t\t    rf_ParityLoggingDagSelect,\n\t\t    rf_MapSIDToPSIDParityLogging,\n\t\t    rf_GetDefaultHeadSepLimitParityLogging,\n\t\t    rf_GetDefaultNumFloatingReconBuffersParityLogging,\n\t\t    NULL, NULL,\n\t\t    rf_SubmitReconBufferBasic,\n\t\t    NULL,\n\t\t    1,\n\t\t    DefaultStates,\n\t\t    0)\n\t},\n#endif\t\t\t\t/* RF_INCLUDE_PARITYLOGGING > 0 */\n\n\t/* end-of-list marker */\n\t{'\\0', NULL,\n\t\tRF_NK2(NULL, NULL)\n\t\tRF_NU(\n\t\t    NULL,\n\t\t    NULL, NULL, NULL,\n\t\t    NULL,\n\t\t    NULL,\n\t\t    NULL,\n\t\t    NULL,\n\t\t    NULL,\n\t\t    NULL, NULL,\n\t\t    NULL,\n\t\t    NULL,\n\t\t    0,\n\t\t    NULL,\n\t\t    0)\n\t}\n};\n\nRF_LayoutSW_t *\nrf_GetLayout(RF_ParityConfig_t parityConfig)\n{\n\tRF_LayoutSW_t *p;\n\n\t/* look up the specific layout */\n\tfor (p = &mapsw[0]; p->parityConfig; p++)\n\t\tif (p->parityConfig == parityConfig)\n\t\t\tbreak;\n\tif (!p->parityConfig)\n\t\treturn (NULL);\n\tRF_ASSERT(p->parityConfig == parityConfig);\n\treturn (p);\n}"
  }
]